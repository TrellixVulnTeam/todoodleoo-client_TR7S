{"ast":null,"code":"import _objectSpread from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{AddTimebox}from'./../Forms/AddItem.js';import{Droppable,Draggable}from'react-beautiful-dnd';import axios from'axios';import{TimeboxTask}from'./../Task/Task.js';import'./timeboxes.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TimeboxesExplainer=function TimeboxesExplainer(props){return/*#__PURE__*/_jsx(\"div\",{className:\"col-12 new-user-copy\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Timeboxes Let you organise tasks into groups like to do today or to do before holiday\"})});};var Timebox=/*#__PURE__*/function(_React$Component){_inherits(Timebox,_React$Component);var _super=_createSuper(Timebox);function Timebox(props){var _this;_classCallCheck(this,Timebox);_this=_super.call(this,props);_this.updateTaskState=function(taskId,targetStatus){var tasks=_this.state.tasks;var task=_this.state.tasks.find(function(t){return t.id===taskId;});task.status=targetStatus;var indx=_this.state.tasks.indexOf(task);tasks.splice(indx,1,task);console.log(tasks);_this.setState({tasks:_toConsumableArray(tasks)});};_this.startTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(taskId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('/update_task_status',{task_id:taskId,target_status:'In Progress'});case 3:_this.updateTaskState(taskId,'In Progress');_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log('Task Update Failed');case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.completeTask=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(taskId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('/update_task_status',{task_id:taskId,target_status:'Done'});case 3:_this.updateTaskState(taskId,'Done');_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log('Task Update Failed');case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.reopenTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(taskId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post('update_task_status',{task_id:taskId,target_status:'To Do'});case 3:_this.updateTaskState(taskId,'To Do');_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log('Task Update Failed');case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.state={tasks:_this.props.tasks};return _this;}_createClass(Timebox,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(Droppable,{droppableId:'Timebox:'+this.props.title,children:function children(provided){return/*#__PURE__*/_jsxs(\"div\",{className:\"timebox card\",ref:provided.innerRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title text-center\",children:_this2.props.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"timebox-status\",children:[\"Status:\",_this2.props.status]}),/*#__PURE__*/_jsx(\"div\",{className:\"timebox-goals mx-auto\",children:_this2.props.goals.map(function(goal){return/*#__PURE__*/_jsx(\"div\",{className:\"timebox-goal\",children:goal});})}),/*#__PURE__*/_jsx(\"div\",{className:\"timebox-tasks\",children:_this2.state.tasks.map(function(task,index){return/*#__PURE__*/_jsx(Draggable,{draggableId:String(task.id),index:index,children:function children(provided){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{children:/*#__PURE__*/_jsx(TimeboxTask,_objectSpread(_objectSpread({},task),{},{startTask:_this2.startTask,completeTask:_this2.completeTask,reopenTask:_this2.reopenTask}))}));}},task.id);})})]}),provided.placeholder]});}});}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.tasks!==prevState.tasks){return{tasks:nextProps.tasks};}else return null;}}]);return Timebox;}(React.Component);var Timeboxes=/*#__PURE__*/function(_React$Component2){_inherits(Timeboxes,_React$Component2);var _super2=_createSuper(Timeboxes);function Timeboxes(){_classCallCheck(this,Timeboxes);return _super2.apply(this,arguments);}_createClass(Timeboxes,[{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(\"div\",{className:\"timeboxes-container col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"component-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"component-title\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Timeboxes\"})}),/*#__PURE__*/_jsx(AddTimebox,{projectId:this.props.projectId,updateTimeboxes:this.props.addTimebox}),/*#__PURE__*/_jsxs(\"div\",{className:\"row m-2\",children:[this.props.tasks.length===0&&/*#__PURE__*/_jsx(TimeboxesExplainer,{}),this.props.timeboxes.map(function(timebox){return timebox.title!=='Backlog'&&/*#__PURE__*/_jsx(Timebox,_objectSpread({projectId:_this3.props.projectId,tasks:_this3.props.tasks.filter(function(t){return t.timebox===timebox.title;})},timebox),timebox.id);})]})]})});}}]);return Timeboxes;}(React.Component);export default Timeboxes;","map":{"version":3,"sources":["/Users/markgray/projects/todoodleoo/src/Timeboxes/Timeboxes.js"],"names":["React","AddTimebox","Droppable","Draggable","axios","TimeboxTask","TimeboxesExplainer","props","Timebox","updateTaskState","taskId","targetStatus","tasks","state","task","find","t","id","status","indx","indexOf","splice","console","log","setState","startTask","post","task_id","target_status","completeTask","reopenTask","title","provided","innerRef","goals","map","goal","index","String","draggableProps","dragHandleProps","placeholder","nextProps","prevState","Component","Timeboxes","projectId","addTimebox","length","timeboxes","timebox","filter"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { AddTimebox } from './../Forms/AddItem.js'\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport axios from 'axios';\nimport {TimeboxTask} from './../Task/Task.js';\nimport './timeboxes.css';\n\nconst TimeboxesExplainer = (props) => {\n\treturn \t<div className='col-12 new-user-copy'>\n\t\t\t\t<p>Timeboxes Let you organise tasks into groups like to do today or to do before holiday</p>\n\t\t\t</div>\n}\n\nclass Timebox extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        tasks: this.props.tasks\n\t    };\n\t  }\n\tstatic getDerivedStateFromProps(nextProps, prevState){\n\t\t\t   if(nextProps.tasks !== prevState.tasks){\n\t\t\t     return { tasks: nextProps.tasks};\n\t\t\t  }\n\t\t\t  else return null;\n\t\t\t}\n\n\tupdateTaskState = (taskId, targetStatus) => {\n\t\tconst tasks = this.state.tasks\n\t\tconst task = this.state.tasks.find(t => t.id === taskId)\n\t\ttask.status = targetStatus\n\t\tconst indx = this.state.tasks.indexOf(task)\n  \t\ttasks.splice(indx, 1, task)\n  \t\tconsole.log(tasks)\n  \t\tthis.setState({tasks: [...tasks]})\n\t}\n\n\tstartTask = async (taskId) => {\n\n\t\ttry {\n      \t\t\tawait axios.post('/update_task_status', {\n\t\t\t\ttask_id: taskId,\n\t\t\t\ttarget_status: 'In Progress' \n\t\t\t})\n      \t\tthis.updateTaskState(taskId, 'In Progress')\n\n    } catch (err) {\n      console.log('Task Update Failed');\n    }\n  };\n\n  \tcompleteTask = async (taskId) => {\n  \t\ttry {\n  \t\t\t\tawait axios.post('/update_task_status', {\n  \t\t\t\ttask_id: taskId,\n  \t\t\t\ttarget_status: 'Done'\n  \t\t\t})\n  \t\t\tthis.updateTaskState(taskId, 'Done')\n  \t\t} catch (err) {\n  \t\t\tconsole.log('Task Update Failed')\n  \t\t}\n  \t}\n\n  \treopenTask = async (taskId) => {\n  \t\ttry {\n  \t\t\t\tawait axios.post('update_task_status', {\n  \t\t\t\ttask_id: taskId,\n  \t\t\t\ttarget_status: 'To Do'\n  \t\t\t})\n  \t\t\tthis.updateTaskState(taskId, 'To Do')\n  \t\t} catch (err) {\n  \t\t\tconsole.log('Task Update Failed')\n  \t\t}\n\n  \t}\n  \t\n\n\trender() {\n\t\treturn  <Droppable droppableId={'Timebox:' + this.props.title}>\n\t\t\t\t\t{(provided) => (\n\t\t\t\t\t\t<div className='timebox card' ref={provided.innerRef}>\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<h2 className='card-title text-center'>{this.props.title}</h2>\n\t\t\t\t\t\t\t\t<div className='timebox-status'>Status:{this.props.status}</div>\n\t\t\t\t\t\t\t\t<div className='timebox-goals mx-auto'>\n\t\t\t\t\t\t\t\t\t{this.props.goals.map( goal =>\n\t\t\t\t\t\t\t\t\t\t<div className='timebox-goal'>\n\t\t\t\t\t\t\t\t\t\t\t{goal}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='timebox-tasks'>\n\t\t\t\t\t\t\t\t\t{this.state.tasks.map( (task, index) =>\n\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={task.id} draggableId={String(task.id)} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t      \t\t\t\t\t        {...provided.dragHandleProps}\t\t\n\t\t\t\t\t\t\t\t\t    \t\t\t    >\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TimeboxTask\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...task}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartTask={this.startTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcompleteTask={this.completeTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treopenTask={this.reopenTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t}\n}\n\nclass Timeboxes extends React.Component {\n\trender() {\n\t\treturn  <div className='timeboxes-container col-6'>\n\t\t\t\t  <div className='component-container'>\n\t\t\t\t    <div className='component-title'>\n\t\t\t\t  \t\t<span>Timeboxes</span>\n\t\t\t\t  \t</div> \t\n\t\t\t\t  \t<AddTimebox \n\t\t\t\t  \t  projectId={this.props.projectId}\n\t\t\t\t  \t  updateTimeboxes={this.props.addTimebox}\n\t\t\t\t  \t/>\n\t\t\t\t  \t<div className='row m-2'>\n\t\t\t\t  \t\t{this.props.tasks.length === 0 &&\n\t\t\t\t  \t\t\t<TimeboxesExplainer />\n\t\t\t\t  \t\t}\n\t\t\t\t\t  \t{this.props.timeboxes.map(timebox =>\n\t\t\t\t\t  \t\ttimebox.title !== 'Backlog' &&\n\t\t\t\t\t  \t\t<Timebox\n\t\t\t\t\t\t\t\tkey={timebox.id}\n\t\t\t\t\t\t\t\tprojectId={this.props.projectId}\n\t\t\t\t\t\t\t\ttasks={this.props.tasks.filter(t => t.timebox === timebox.title)}\n\t\t\t\t\t\t\t\t{...timebox}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t  \t\t)}\t\n\t\t\t\t  \t\t\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t}\n}\n\nexport default Timeboxes"]},"metadata":{},"sourceType":"module"}