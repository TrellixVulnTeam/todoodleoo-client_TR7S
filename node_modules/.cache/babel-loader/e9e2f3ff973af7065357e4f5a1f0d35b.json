{"ast":null,"code":"var _jsxFileName = \"/Users/markgray/projects/Todoodleoo/todoodleoo-client/src/Timeboxes/Timeboxes.js\";\nimport React from 'react';\nimport { AddTimebox } from './../Forms/AddItem.js';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport { TimeboxTask } from './../Task/Task.js';\nimport './timeboxes.css';\nimport { postRequest } from './../API/api.js';\nimport pencil from \"./../img/pencil.svg\";\nimport deleteIcon from './../img/delete_icon.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TimeboxesExplainer = props => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-12 new-user-copy\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Timeboxes Let you organise tasks into groups like to do today or to do before holiday\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 10\n  }, this);\n};\n\n_c = TimeboxesExplainer;\n\nclass Timebox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updateTaskState = (taskId, targetStatus) => {\n      const tasks = this.state.tasks;\n      const task = this.state.tasks.find(t => t.id === taskId);\n      task.status = targetStatus;\n      const indx = this.state.tasks.indexOf(task);\n      tasks.splice(indx, 1, task);\n      console.log(tasks);\n      this.setState({\n        tasks: [...tasks]\n      });\n    };\n\n    this.startTask = async taskId => {\n      try {\n        const data = {\n          task_id: taskId,\n          target_status: 'In Progress'\n        };\n        postRequest('/update_task_status', data);\n        this.updateTaskState(taskId, 'In Progress');\n      } catch (err) {\n        console.log('Task Update Failed');\n      }\n    };\n\n    this.completeTask = async taskId => {\n      try {\n        const data = {\n          task_id: taskId,\n          target_status: 'Done'\n        };\n        postRequest('/update_task_status', data);\n        this.updateTaskState(taskId, 'Done');\n      } catch (err) {\n        console.log('Task Update Failed');\n      }\n    };\n\n    this.reopenTask = async taskId => {\n      try {\n        const data = {\n          task_id: taskId,\n          target_status: 'To Do'\n        };\n        postRequest('/update_task_status', data);\n        this.updateTaskState(taskId, 'To Do');\n      } catch (err) {\n        console.log('Task Update Failed');\n      }\n    };\n\n    this.deleteTimebox = async timeboxId => {\n      try {\n        const data = {\n          project_id: this.props.projectId,\n          timebox_id: timeboxId\n        };\n        postRequest('/delete_timebox', data);\n        this.props.deleteTimebox(timeboxId);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.editMode = () => {\n      this.setState({\n        editing: true\n      });\n    };\n\n    this.save = timeboxId => {\n      this.props.editTimebox(timeboxId, this.state);\n      this.setState({\n        editing: false\n      });\n\n      try {\n        const data = {\n          project_id: this.props.projectId,\n          timebox_id: timeboxId,\n          title: this.state.title,\n          goals: this.state.goals\n        };\n        postRequest('/edit_timebox', data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.closeTimebox = () => {\n      try {\n        const data = {\n          project_id: this.props.projectId,\n          timebox_id: this.props.id,\n          status: 'Closed'\n        };\n        postRequest('/update_timebox_status', data);\n        this.props.updateTimeboxStatus(this.props.id, 'Closed');\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.state = {\n      tasks: this.props.tasks,\n      title: this.props.title,\n      goals: this.props.goals\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.tasks !== prevState.tasks) {\n      return {\n        tasks: nextProps.tasks\n      };\n    } else return null;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Droppable, {\n      droppableId: 'Timebox:' + this.props.title,\n      children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timebox card\",\n        ref: provided.innerRef,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [this.state.editing === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn btn-primary btn-sm\",\n            onClick: () => this.save(this.props.id),\n            children: \"save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 12\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"edit-pencil-container\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"edit-pencil\",\n              className: \"edit-pencil\",\n              onClick: () => this.editMode(),\n              src: pencil\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"delete-icon-container\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"delete-icon\",\n              className: \"delete-icon\",\n              onClick: () => this.deleteTimebox(this.props.id),\n              src: deleteIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 12\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 11\n          }, this), this.state.editing === true ? /*#__PURE__*/_jsxDEV(\"form\", {\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-control form-control mt-1 mb-1\",\n              type: \"text\",\n              value: this.state.title,\n              onChange: event => this.setState({\n                title: event.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 12\n          }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"card-title text-center\",\n            children: this.props.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timebox-status\",\n            children: [\"Status:\", this.props.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn btn-primary\",\n            onClick: this.closeTimebox,\n            children: \"Close Timebox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timebox-goals mx-auto\",\n            children: this.state.editing === true ? /*#__PURE__*/_jsxDEV(\"form\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 mx-auto mt-2 goals-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  value: this.state.goals[0],\n                  type: \"text\",\n                  onChange: event => this.setState({\n                    goals: [event.target.value, this.state.goals[1], this.state.goals[2]]\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  value: this.state.goals[1],\n                  type: \"text\",\n                  onChange: event => this.setState({\n                    goals: [this.state.goals[0], event.target.value, this.state.goals[2]]\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  value: this.state.goals[2],\n                  type: \"text\",\n                  onChange: event => this.setState({\n                    goals: [this.state.goals[0], this.state.goals[1], event.target.value]\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 13\n            }, this) : this.props.goals.map(goal => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"timebox-goal\",\n              children: goal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 13\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timebox-tasks\",\n            children: this.state.tasks.map((task, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n              draggableId: String(task.id),\n              index: index,\n              children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: provided.innerRef,\n                ...provided.draggableProps,\n                ...provided.dragHandleProps,\n                children: /*#__PURE__*/_jsxDEV(TimeboxTask, { ...task,\n                  startTask: this.startTask,\n                  completeTask: this.completeTask,\n                  reopenTask: this.reopenTask\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 16\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 17\n              }, this)\n            }, task.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 10\n        }, this), provided.placeholder]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, this.props.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nclass Timeboxes extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeboxes-container col-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"component-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"component-title\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Timeboxes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(AddTimebox, {\n          projectId: this.props.projectId,\n          updateTimeboxes: this.props.addTimebox\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row m-2\",\n          children: [this.props.tasks.length === 0 && /*#__PURE__*/_jsxDEV(TimeboxesExplainer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 10\n          }, this), this.props.timeboxes.map(timebox => timebox.title !== 'Backlog' && /*#__PURE__*/_jsxDEV(Timebox, {\n            projectId: this.props.projectId,\n            deleteTimebox: this.props.deleteTimebox,\n            editTimebox: this.props.editTimebox,\n            updateTimeboxStatus: this.props.updateTimeboxStatus,\n            tasks: this.props.tasks.filter(t => t.timebox === timebox.title),\n            ...timebox\n          }, timebox.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 10\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Timeboxes;\n\nvar _c;\n\n$RefreshReg$(_c, \"TimeboxesExplainer\");","map":{"version":3,"sources":["/Users/markgray/projects/Todoodleoo/todoodleoo-client/src/Timeboxes/Timeboxes.js"],"names":["React","AddTimebox","Droppable","Draggable","TimeboxTask","postRequest","deleteIcon","TimeboxesExplainer","props","Timebox","Component","constructor","updateTaskState","taskId","targetStatus","tasks","state","task","find","t","id","status","indx","indexOf","splice","console","log","setState","startTask","data","task_id","target_status","err","completeTask","reopenTask","deleteTimebox","timeboxId","project_id","projectId","timebox_id","editMode","editing","save","editTimebox","title","goals","closeTimebox","updateTimeboxStatus","getDerivedStateFromProps","nextProps","prevState","render","provided","innerRef","pencil","event","target","value","map","goal","index","String","draggableProps","dragHandleProps","placeholder","Timeboxes","addTimebox","length","timeboxes","timebox","filter"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { AddTimebox } from './../Forms/AddItem.js'\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport {TimeboxTask} from './../Task/Task.js';\nimport './timeboxes.css';\nimport { postRequest }from './../API/api.js'\nimport pencil from './../img/pencil.svg';\nimport deleteIcon from './../img/delete_icon.png';\n\n\nconst TimeboxesExplainer = (props) => {\n\treturn \t<div className='col-12 new-user-copy'>\n\t\t\t\t<p>Timeboxes Let you organise tasks into groups like to do today or to do before holiday</p>\n\t\t\t</div>\n}\n\nclass Timebox extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        tasks: this.props.tasks,\n\t\t\t\t\ttitle: this.props.title,\n\t\t\t\t\tgoals: this.props.goals\n\t    };\n\t  }\n\tstatic getDerivedStateFromProps(nextProps, prevState){\n\t\t\t   if(nextProps.tasks !== prevState.tasks){\n\t\t\t     return { tasks: nextProps.tasks};\n\t\t\t  }\n\t\t\t  else return null;\n\t\t\t}\n\n\tupdateTaskState = (taskId, targetStatus) => {\n\t\tconst tasks = this.state.tasks\n\t\tconst task = this.state.tasks.find(t => t.id === taskId)\n\t\ttask.status = targetStatus\n\t\tconst indx = this.state.tasks.indexOf(task)\n  \t\ttasks.splice(indx, 1, task)\n  \t\tconsole.log(tasks)\n  \t\tthis.setState({tasks: [...tasks]})\n\t}\n\n\tstartTask = async (taskId) => {\n\n\t\ttry {\n\t\t\tconst data = {\n\t\t\t\ttask_id: taskId,\n\t\t\t\ttarget_status: 'In Progress'\n\t\t\t}\n\t\t\tpostRequest('/update_task_status', data)\n      this.updateTaskState(taskId, 'In Progress')\n    } catch (err) {\n      console.log('Task Update Failed');\n    }\n  };\n\n  \tcompleteTask = async (taskId) => {\n  \t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\ttask_id: taskId,\n\t\t\t\t\ttarget_status: 'Done'\n\t\t\t\t}\n\t\t\t\tpostRequest('/update_task_status', data)\n  \t\t\tthis.updateTaskState(taskId, 'Done')\n  \t\t} catch (err) {\n  \t\t\tconsole.log('Task Update Failed')\n  \t\t}\n  \t}\n\n  \treopenTask = async (taskId) => {\n  \t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\ttask_id: taskId,\n\t\t\t\t\ttarget_status: 'To Do'\n\t\t\t\t}\n\t\t\t\tpostRequest('/update_task_status', data)\n  \t\t\tthis.updateTaskState(taskId, 'To Do')\n  \t\t} catch (err) {\n  \t\t\tconsole.log('Task Update Failed')\n  \t\t}\n  \t}\n\n\t\tdeleteTimebox = async (timeboxId) => {\n\t\t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\tproject_id: this.props.projectId,\n\t\t\t\t\ttimebox_id: timeboxId\n\t\t\t\t}\n\t\t\t\tpostRequest('/delete_timebox', data)\n\t\t\t\tthis.props.deleteTimebox(timeboxId)\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err)\n\t\t\t}\n\t\t}\n\n\t\teditMode = () => {\n\t\t\tthis.setState({editing: true})\n\t\t}\n\n\t\tsave = (timeboxId) => {\n\t\t\tthis.props.editTimebox(timeboxId, this.state)\n\t\t\tthis.setState({editing: false})\n\t\t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\tproject_id: this.props.projectId,\n\t\t\t\t\ttimebox_id: timeboxId,\n\t\t\t\t\ttitle: this.state.title,\n\t\t\t\t\tgoals: this.state.goals\n\t\t\t\t}\n\t\t\t\tpostRequest('/edit_timebox', data)\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err)\n\t\t\t}\n\t\t}\n\n\t\tcloseTimebox = () => {\n\t\t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\tproject_id: this.props.projectId,\n\t\t\t\t\ttimebox_id: this.props.id,\n\t\t\t\t\tstatus: 'Closed'\n\t\t\t\t}\n\t\t\t\tpostRequest('/update_timebox_status', data)\n\t\t\t\tthis.props.updateTimeboxStatus(this.props.id, 'Closed')\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err)\n\t\t\t}\n\t\t}\n\n\n\trender() {\n\t\t\treturn  <Droppable\n\t\t\t\t\t\t\t\tdroppableId={'Timebox:' + this.props.title}\n\t\t\t\t\t\t\t\tkey={this.props.id}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{(provided) => (\n\t\t\t\t\t\t\t\t<div className='timebox card' ref={provided.innerRef}>\n\t\t\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t\t\t{this.state.editing === true ?\n\t\t\t\t\t\t\t\t\t\t\t<div className='btn btn-primary btn-sm' onClick={() => this.save(this.props.id)}>save</div> :\n\t\t\t\t\t\t\t\t\t\t\t<span className='edit-pencil-container'>\n\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"edit-pencil\" className='edit-pencil' onClick={() => this.editMode()} src={pencil}></img>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t<span className='delete-icon-container'>\n\t\t\t\t\t\t\t\t\t\t\t<img alt=\"delete-icon\" className='delete-icon' onClick={() => this.deleteTimebox(this.props.id)} src={deleteIcon}></img>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{this.state.editing === true ?\n\t\t\t\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control form-control mt-1 mb-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={event => this.setState({ title: event.target.value })}\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</form> :\n\t\t\t\t\t\t\t\t\t\t\t<h4 className='card-title text-center'>{this.props.title}</h4>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t<div className='timebox-status'>Status:{this.props.status}</div>\n\t\t\t\t\t\t\t\t\t\t<div className='btn btn-primary' onClick={this.closeTimebox}>Close Timebox</div>\n\t\t\t\t\t\t\t\t\t\t<div className='timebox-goals mx-auto'>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.editing === true ?\n\t\t\t\t\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='col-12 mx-auto mt-2 goals-group'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input className='form-control' value={this.state.goals[0]} type=\"text\" onChange={event => this.setState({goals: [event.target.value, this.state.goals[1], this.state.goals[2]]})}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input className='form-control' value={this.state.goals[1]} type=\"text\" onChange={event => this.setState({goals: [this.state.goals[0], event.target.value, this.state.goals[2]]})}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input className='form-control' value={this.state.goals[2]} type=\"text\" onChange={event => this.setState({goals: [this.state.goals[0], this.state.goals[1], event.target.value]})}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</form> :\n\n\t\t\t\t\t\t\t\t\t\t\tthis.props.goals.map( goal =>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='timebox-goal'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{goal}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='timebox-tasks'>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.tasks.map( (task, index) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={task.id} draggableId={String(task.id)} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t      \t\t\t\t\t        {...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\t    >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TimeboxTask\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...task}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartTask={this.startTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcompleteTask={this.completeTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treopenTask={this.reopenTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Droppable>\n\n\t\t\t}\n\t\t}\n\nclass Timeboxes extends React.Component {\n\trender() {\n\t\treturn  <div className='timeboxes-container col-5'>\n\t\t\t\t  <div className='component-container'>\n\t\t\t\t    <div className='component-title'>\n\t\t\t\t  \t\t<span>Timeboxes</span>\n\t\t\t\t  \t</div>\n\t\t\t\t  \t<AddTimebox\n\t\t\t\t  \t  projectId={this.props.projectId}\n\t\t\t\t  \t  updateTimeboxes={this.props.addTimebox}\n\t\t\t\t  \t/>\n\t\t\t\t  \t<div className='row m-2'>\n\t\t\t\t  \t\t{this.props.tasks.length === 0 &&\n\t\t\t\t  \t\t\t<TimeboxesExplainer />\n\t\t\t\t  \t\t}\n\t\t\t\t\t  \t{this.props.timeboxes.map(timebox =>\n\t\t\t\t\t  \t\ttimebox.title !== 'Backlog' &&\n\t\t\t\t\t  \t\t<Timebox\n\t\t\t\t\t\t\t\tkey={timebox.id}\n\t\t\t\t\t\t\t\tprojectId={this.props.projectId}\n\t\t\t\t\t\t\t\tdeleteTimebox={this.props.deleteTimebox}\n\t\t\t\t\t\t\t\teditTimebox={this.props.editTimebox}\n\t\t\t\t\t\t\t\tupdateTimeboxStatus={this.props.updateTimeboxStatus}\n\t\t\t\t\t\t\t\ttasks={this.props.tasks.filter(t => t.timebox === timebox.title)}\n\t\t\t\t\t\t\t\t{...timebox}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t  \t\t)}\n\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t}\n}\n\n\nexport default Timeboxes\n"]},"metadata":{},"sourceType":"module"}