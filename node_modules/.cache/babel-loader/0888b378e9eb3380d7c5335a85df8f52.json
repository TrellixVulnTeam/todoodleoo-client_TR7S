{"ast":null,"code":"import _classCallCheck from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import axios from'axios';import'./login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',password:''};_this.loginFailed=function(){var el=document.getElementById('error');el.innerHTML='Login failed, incorrect username or password';};_this.handleSubmit=function(event){axios.post('/auth/login',{username:_this.state.username,password:_this.state.password}).then(function(response){window.location.href='/';},function(error){if(error.response.status===401){_this.loginFailed();}});event.preventDefault();_this.setState({username:'',password:''});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-8 mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"container\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"div\",{id:\"error\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg m-2\",placeholder:\"Username\",onChange:function onChange(event){return _this2.setState({username:event.target.value});},value:this.state.username})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control form-control-lg m-2\",placeholder:\"Password\",onChange:function onChange(event){return _this2.setState({password:event.target.value});},value:this.state.password})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mx-auto mb-4\",children:\"Log in\"})})]})]})})});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/Users/markgray/projects/todoodleoo/src/Login/Login.js"],"names":["React","axios","Login","state","username","password","loginFailed","el","document","getElementById","innerHTML","handleSubmit","event","post","then","response","window","location","href","error","status","preventDefault","setState","target","value","Component"],"mappings":"wcAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,C,2FAEMC,CAAAA,K,mUACJC,K,CAAQ,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,C,OAERC,W,CAAc,UAAM,CACnB,GAAMC,CAAAA,EAAE,CAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAX,CACAF,EAAE,CAACG,SAAH,CAAe,8CAAf,CACA,C,OAEDC,Y,CAAe,SAACC,KAAD,CAAW,CACxBX,KAAK,CAACY,IAAN,CAAW,aAAX,CAA0B,CACxBT,QAAQ,CAAE,MAAKD,KAAL,CAAWC,QADG,CAExBC,QAAQ,CAAE,MAAKF,KAAL,CAAWE,QAFG,CAA1B,EAICS,IAJD,CAIM,SAACC,QAAD,CAAc,CAClBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACD,CAND,CAMG,SAACC,KAAD,CAAW,CACZ,GAAIA,KAAK,CAACJ,QAAN,CAAeK,MAAf,GAA0B,GAA9B,CAAmC,CACjC,MAAKd,WAAL,GACD,CACF,CAVD,EAWEM,KAAK,CAACS,cAAN,GACA,MAAKC,QAAL,CAAc,CAAClB,QAAQ,CAAG,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAAd,EACH,C,uDACD,iBAAS,iBACP,mBAAO,YAAK,SAAS,CAAC,YAAf,uBACD,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,eAAf,wBACE,WAAI,SAAS,CAAC,WAAd,oBADF,cAEE,YAAK,EAAE,CAAC,OAAR,EAFF,cAGE,cAAM,QAAQ,CAAE,KAAKM,YAArB,wBACE,YAAK,SAAS,CAAC,YAAf,uBACE,cAAO,IAAI,CAAC,MAAZ,CACE,SAAS,CAAC,kCADZ,CAEE,WAAW,CAAC,UAFd,CAGE,QAAQ,CAAE,kBAAAC,KAAK,QAAI,CAAA,MAAI,CAACU,QAAL,CAAc,CAAElB,QAAQ,CAAEQ,KAAK,CAACW,MAAN,CAAaC,KAAzB,CAAd,CAAJ,EAHjB,CAIE,KAAK,CAAE,KAAKrB,KAAL,CAAWC,QAJpB,EADF,EADF,cASE,kCACE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,kCAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,CAAE,kBAAAQ,KAAK,QAAI,CAAA,MAAI,CAACU,QAAL,CAAc,CAAEjB,QAAQ,CAAEO,KAAK,CAACW,MAAN,CAAaC,KAAzB,CAAd,CAAJ,EAJjB,CAKE,KAAK,CAAE,KAAKrB,KAAL,CAAWE,QALpB,EADF,EATF,cAkBO,YAAK,SAAS,CAAC,iBAAf,uBACC,eAAQ,SAAS,CAAC,8BAAlB,oBADD,EAlBP,GAHF,GADF,EADC,EAAP,CA+BD,C,mBAvDiBL,KAAK,CAACyB,S,EA0D1B,cAAgBvB,CAAAA,KAAhB","sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport './login.css';\n\nclass Login extends React.Component {\n  state = { username: '', password: ''};\n\n  loginFailed = () => {\n   const el = document.getElementById('error')\n   el.innerHTML = 'Login failed, incorrect username or password'\n  }\n\n  handleSubmit = (event) => {\n    axios.post('/auth/login', {\n      username: this.state.username,\n      password: this.state.password\n    })\n    .then((response) => {\n      window.location.href = '/'\n    }, (error) => {\n      if (error.response.status === 401) {\n        this.loginFailed()\n      }\n    });\n      event.preventDefault()\n      this.setState({username : '', password: ''})   \n  };\n  render() {\n    return <div className='login-page'>\n          <div className='row'>\n            <div className='col-8 mx-auto'>\n              <h2 className='container'>Log In</h2>\n              <div id='error'></div>\n              <form onSubmit={this.handleSubmit}>\n                <div className='form-group'>\n                  <input type=\"text\" \n                    className='form-control form-control-lg m-2'\n                    placeholder=\"Username\" \n                    onChange={event => this.setState({ username: event.target.value })}\n                    value={this.state.username} \n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"password\"\n                    className='form-control form-control-lg m-2'\n                    placeholder=\"Password\"\n                    onChange={event => this.setState({ password: event.target.value })}\n                    value={this.state.password}\n                  />\n                </div>\n                     <div className='col text-center'>\n                      <button className='btn btn-primary mx-auto mb-4'>Log in</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n\n  }\n}\n\nexport default  Login "]},"metadata":{},"sourceType":"module"}