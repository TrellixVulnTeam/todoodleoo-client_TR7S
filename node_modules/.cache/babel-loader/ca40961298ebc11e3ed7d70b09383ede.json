{"ast":null,"code":"import _toConsumableArray from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'bootstrap';import axios from'axios';import'./working.css';import Tick from'./../img/Tick.png';import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TickCTA=function TickCTA(props){if(props.taskStatus==='In Progress'){return/*#__PURE__*/_jsx(\"img\",{alt:\"empty tick\",src:Tick,className:\"cta-tick empty-tick\",onClick:function onClick(){return props.changeStatus('Done');}});}else if(props.taskStatus==='Done'){return/*#__PURE__*/_jsx(\"img\",{alt:\"empty tick\",src:Tick,className:\"cta-tick\",onClick:function onClick(){return props.changeStatus('In Progress');}});}else return/*#__PURE__*/_jsx(\"div\",{});};var CTA=function CTA(props){if(props.taskStatus==='To Do'){return/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-primary\",onClick:function onClick(){return props.changeStatus('In Progress');},children:\"Start\"});}else if(props.taskStatus==='In Progress'){return/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-danger\",onClick:function onClick(){return props.changeStatus('To Do');},children:\"Stop\"});}else return/*#__PURE__*/_jsx(\"div\",{});};var MoveToBacklog=function MoveToBacklog(props){return/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-secondary m-2\",onClick:function onClick(){return props.MoveToBacklog();},children:\"Move To Backlog\"});};var TaskStatus=function TaskStatus(props){if(props.status==='In Progress'){return/*#__PURE__*/_jsx(\"div\",{className:\"status-container\",children:\"In Progress\"});}else return/*#__PURE__*/_jsx(\"div\",{});};var CloseTimebox=function CloseTimebox(props){var history=useHistory();var path={pathname:'/planning',query:{projectId:props.projectId}};var close=function close(){axios.post('/update_timebox_status',{project_id:props.projectId,timebox_id:props.timeboxId,status:'Closed'}).then(history.push(path));};return/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-primary w-100 mt-2\",onClick:function onClick(){return close();},children:\"Complete Timebox\"});};var ReopenTimeBox=function ReopenTimeBox(props){var history=useHistory();var path={pathname:'/planning',query:{projectId:props.projectId}};var reopen=function reopen(){axios.post('/update_timebox_status',{project_id:props.projectId,timebox_id:props.timeboxId,status:'To Do'}).then(function(response){history.push(path);},function(error){console.log(error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-secondary w-100 mt-2\",onClick:function onClick(){return reopen();},children:\"Back to Planning\"});};var Task=/*#__PURE__*/function(_React$Component){_inherits(Task,_React$Component);var _super=_createSuper(Task);function Task(props){var _this;_classCallCheck(this,Task);_this=_super.call(this,props);_this.changeStatus=function(targetStatus){axios.post('/update_task_status',{task_id:_this.props.task.id,target_status:targetStatus});_this.setState({status:targetStatus,priority:0});_this.props.updateTask(_this.state.id,targetStatus);};_this.MoveToBacklog=function(){_this.props.MoveToBacklog(_this.state.id);};_this.state=_objectSpread({},_this.props.task);return _this;}_createClass(Task,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"card w-75 mx-auto mt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title col-6\",children:this.props.task.title}),/*#__PURE__*/_jsx(\"div\",{className:\"status-container col-6\",children:/*#__PURE__*/_jsx(TaskStatus,{status:this.state.status})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cta-container col-6\",children:[/*#__PURE__*/_jsx(CTA,{taskStatus:this.state.status,changeStatus:this.changeStatus}),this.state.status==='To Do'&&/*#__PURE__*/_jsx(MoveToBacklog,{MoveToBacklog:this.MoveToBacklog})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cta-container col-6\",children:/*#__PURE__*/_jsx(TickCTA,{taskStatus:this.state.status,changeStatus:this.changeStatus})})]})});}}]);return Task;}(React.Component);var Tasks=/*#__PURE__*/function(_React$Component2){_inherits(Tasks,_React$Component2);var _super2=_createSuper(Tasks);function Tasks(){var _this2;_classCallCheck(this,Tasks);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.updateTask=function(taskId,status){_this2.props.updateTask(taskId,status);};_this2.MoveToBacklog=function(taskId){_this2.props.MoveToBacklog(taskId);};return _this2;}_createClass(Tasks,[{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(\"div\",{className:\"col-12 tasks\",children:this.props.tasks.map(function(task){return/*#__PURE__*/_jsx(Task,{task:task,updateTask:_this3.updateTask,MoveToBacklog:_this3.MoveToBacklog},task.id);})});}}]);return Tasks;}(React.Component);var AddTask=/*#__PURE__*/function(_React$Component3){_inherits(AddTask,_React$Component3);var _super3=_createSuper(AddTask);function AddTask(){var _this4;_classCallCheck(this,AddTask);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this4=_super3.call.apply(_super3,[this].concat(args));_this4.state={title:''};_this4.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.post('/add_task',{title:_this4.state.title,project_id:_this4.props.projectId,timebox:_this4.props.timeboxName}).then(function(response){_this4.props.addNewTask(response.data);},function(error){console.log(error);});event.preventDefault();_this4.setState({title:''});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this4;}_createClass(AddTask,[{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsx(\"div\",{className:\"row add-task-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-6 mx-auto mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control form-control-lg m-2\",type:\"text\",value:this.state.title,onChange:function onChange(event){return _this5.setState({title:event.target.value});},placeholder:\"Task Title\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mx-auto mb-4\",children:\"Add To This Timebox\"})})]})})});}}]);return AddTask;}(React.Component);var Working=/*#__PURE__*/function(_React$Component4){_inherits(Working,_React$Component4);var _super4=_createSuper(Working);function Working(props){var _this6;_classCallCheck(this,Working);_this6=_super4.call(this,props);_this6.getTimeboxTasks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(projectId,timeboxId){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/get_tasks_of_timebox?project_id=\".concat(projectId,\"&timebox_id=\").concat(timeboxId));case 2:resp=_context2.sent;_this6.setState({tasks:resp.data.tasks});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this6.updateTask=function(taskId,status){var taskObj=_this6.state.tasks.find(function(task){return task.id===taskId;});taskObj.status=status;if(status==='Done'){taskObj.priority=0;}var tasks=_this6.state.tasks.filter(function(task){return task!==taskObj;});var newTasks=[].concat(_toConsumableArray(tasks),[taskObj]);_this6.setState({tasks:newTasks});};_this6.addNewTask=function(taskData){_this6.setState(function(prevState){return{tasks:[].concat(_toConsumableArray(_this6.state.tasks),[taskData])};});};_this6.MoveToBacklog=function(taskId){axios.post('/update_task',{project_id:_this6.state.projectId,task_id:taskId,priority:0,timebox:'Backlog'});var taskObj=_this6.state.tasks.find(function(task){return task.id===taskId;});var tasks=_this6.state.tasks.filter(function(task){return task!==taskObj;});_this6.setState({tasks:tasks});};var sp=new URLSearchParams(_this6.props.location.query);var _projectId=sp.get(\"projectId\");var _timeboxId=sp.get(\"timeboxId\");var timeboxName=sp.get(\"timeboxName\");if(_projectId===null){_this6.props.history.push('/');};_this6.getTimeboxTasks(_projectId,_timeboxId).then(_this6.state={dataReceived:true,projectId:_projectId,timeboxId:_timeboxId,timeboxName:timeboxName,tasks:[]});return _this6;}_createClass(Working,[{key:\"render\",value:function render(){if(this.state.dataReceived===false){return/*#__PURE__*/_jsx(\"div\",{children:\"abc\"});}else{var tasks=this.state.tasks.sort(function(a,b){return a.priority>b.priority?1:-1;});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row working-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-8 mx-auto\",children:[/*#__PURE__*/_jsx(ReopenTimeBox,{projectId:this.state.projectId,timeboxId:this.state.timeboxId}),/*#__PURE__*/_jsx(CloseTimebox,{projectId:this.state.projectId,timeboxId:this.state.timeboxId})]}),/*#__PURE__*/_jsx(AddTask,{projectId:this.state.projectId,timeboxName:this.state.timeboxName,addNewTask:this.addNewTask}),/*#__PURE__*/_jsx(Tasks,{tasks:tasks,updateTask:this.updateTask,MoveToBacklog:this.MoveToBacklog})]})});}}}]);return Working;}(React.Component);export default Working;","map":{"version":3,"sources":["/Users/markgray/projects/todoodleoo/src/Working/Working.js"],"names":["React","axios","Tick","useHistory","TickCTA","props","taskStatus","changeStatus","CTA","MoveToBacklog","TaskStatus","status","CloseTimebox","history","path","pathname","query","projectId","close","post","project_id","timebox_id","timeboxId","then","push","ReopenTimeBox","reopen","response","error","console","log","Task","targetStatus","task_id","task","id","target_status","setState","priority","updateTask","state","title","Component","Tasks","taskId","tasks","map","AddTask","handleSubmit","event","timebox","timeboxName","addNewTask","data","preventDefault","target","value","Working","getTimeboxTasks","get","resp","taskObj","find","filter","newTasks","taskData","prevState","sp","URLSearchParams","location","dataReceived","sort","a","b"],"mappings":"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","sourcesContent":["import React from 'react';\nimport 'bootstrap';\nimport axios from 'axios';\nimport './working.css';\nimport Tick from './../img/Tick.png';\nimport { useHistory } from \"react-router-dom\";\n\nconst TickCTA = (props) => {\n\tif ( props.taskStatus === 'In Progress') {\n\t\treturn <img alt='empty tick' src={Tick} className='cta-tick empty-tick' onClick = {() => props.changeStatus('Done')}></img>\n\t} else if ( props.taskStatus === 'Done') {\n\t\treturn <img alt='empty tick' src={Tick} className='cta-tick' onClick = {() => props.changeStatus('In Progress')}></img>\n\t} else return <div></div>\n}\n\nconst CTA = (props) => {\n\tif (props.taskStatus === 'To Do') {\n\t\treturn <div className='btn btn-primary' onClick = {() => props.changeStatus('In Progress')}>Start</div>\n\t} else if (props.taskStatus === 'In Progress') {\n\t\treturn <div className='btn btn-danger' onClick = {() => props.changeStatus('To Do')}>Stop</div>\n\t} else return <div></div>\n}\n\nconst MoveToBacklog = (props) => {\n\treturn <div className='btn btn-secondary m-2' onClick={() => props.MoveToBacklog()}>Move To Backlog</div>\n}\n\n\n\nconst TaskStatus = (props) => {\n\tif (props.status === 'In Progress') {\n\t\treturn  <div className='status-container'>\n\t\t\t\t\tIn Progress\n\t\t\t\t</div>\n\t} else return <div></div>\n}\n\nconst CloseTimebox = (props) => {\n\tconst history = useHistory();\n\tconst path = {pathname: '/planning', query: {projectId: props.projectId}}\n\tconst close = () => {\n\t\taxios.post('/update_timebox_status', {\n\t\tproject_id: props.projectId,\n\t\ttimebox_id: props.timeboxId,\n\t\tstatus: 'Closed'\n\t\t}).then(history.push(path))\n\t}\n\n\treturn <div \n\t\t\tclassName='btn btn-primary w-100 mt-2'\n\t\t\tonClick = {() => close()}>\n\t\t\t\tComplete Timebox\n\t\t\t</div>\n}\n\nconst ReopenTimeBox = (props) => {\n\tconst history = useHistory();\n\tconst path = {pathname: '/planning', query: {projectId: props.projectId}}\n\tconst reopen = () => {\n\t\taxios.post('/update_timebox_status', {\n\t\tproject_id: props.projectId,\n\t\ttimebox_id: props.timeboxId,\n\t\tstatus: 'To Do'\n\t\t}).then((response) => {\n\t\t  history.push(path)\n\t\t}, (error) => {\n\t\t  console.log(error);\n\t\t});\n\t}\n\n\treturn <div \n\t\t\tclassName='btn btn-secondary w-100 mt-2'\n\t\t\tonClick = {() => reopen()}>\n\t\t\t\tBack to Planning\n\t\t\t</div>\n}\n\nclass Task extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {...this.props.task};\n  }\n\n\tchangeStatus = (targetStatus) => {\n\t\taxios.post('/update_task_status', {\n\t\t\ttask_id: this.props.task.id,\n\t\t\ttarget_status: targetStatus\n\t\t})\n\t\tthis.setState({status: targetStatus, priority: 0})\n\t\tthis.props.updateTask(this.state.id, targetStatus)\n\t}\n\n\tMoveToBacklog = () => {\n\t\tthis.props.MoveToBacklog(this.state.id)\n\t}\n\n\trender() {\n\t\treturn <div className='card w-75 mx-auto mt-2'>\n\t\t\t\t<div className='card-body row'>\n\t\t\t\t\t<div className='card-title col-6'> \n\t\t\t\t\t\t{this.props.task.title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='status-container col-6'>\n\t\t\t\t\t\t<TaskStatus status={this.state.status} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='cta-container col-6'>\n\t\t\t\t\t\t\t<CTA taskStatus={this.state.status} changeStatus={this.changeStatus} />\n\t\t\t\t\t\t\t{this.state.status === 'To Do'  && <MoveToBacklog MoveToBacklog={this.MoveToBacklog}/>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='cta-container col-6'>\n\t\t\t\t\t\t\t<TickCTA taskStatus={this.state.status} changeStatus={this.changeStatus} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t   </div>\n\t}\n}\n\nclass Tasks extends React.Component {\n\tupdateTask = (taskId, status) => {\n\t\tthis.props.updateTask(taskId, status);\n\t}\n\n\tMoveToBacklog = (taskId) => {\n\t\tthis.props.MoveToBacklog(taskId)\n\t}\n\n\trender() {\n\t\treturn <div className='col-12 tasks'>\n\t\t\t\t{this.props.tasks.map(task => \n\t\t\t\t\t<Task \n\t\t\t\t\t\ttask={task}\n\t\t\t\t\t\tkey={task.id}\n\t\t\t\t\t\tupdateTask={this.updateTask}\n\t\t\t\t\t\tMoveToBacklog={this.MoveToBacklog}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t  </div>\n\t}\n}\n\nclass AddTask extends React.Component {\n\tstate = { title: ''};\n\n\thandleSubmit = async (event) => {\n    axios.post('/add_task', {\n    \ttitle: this.state.title,\n    \tproject_id: this.props.projectId,\n    \ttimebox: this.props.timeboxName\n    })\n    .then((response) => {\n\t\t  this.props.addNewTask(response.data)\n\t\t}, (error) => {\n\t\t  console.log(error);\n\t\t});\n\t\tevent.preventDefault()\n    \tthis.setState({title : ''})   \n  };\n\trender () {\n\t\treturn <div className='row add-task-container'>\n\t\t\t\t\t\t<div className='col-6 mx-auto mt-3'>\n\t\t\t\t\t\t <form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t \t<div className='form-group'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg m-2'\n\t\t\t\t          type=\"text\" \n\t\t\t\t          value={this.state.title}\n\t\t\t\t          onChange={event => this.setState({ title: event.target.value })}\n\t\t\t\t          placeholder=\"Task Title\" \n\t\t\t\t          required \n\t\t\t\t        />\n\t\t\t\t       </div>\n\t\t\t         <div className='col text-center'>\n\t\t\t\t\t\t\t\t<button className='btn btn-primary mx-auto mb-4'>Add To This Timebox</button>\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t </form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t </div>\n\t}\n}\n\nclass Working extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    const sp = new URLSearchParams(this.props.location.query);\n\tconst projectId = sp.get(\"projectId\")\n\tconst timeboxId = sp.get(\"timeboxId\")\n\tconst timeboxName = sp.get(\"timeboxName\")\n\tif (projectId === null) {\n\t\t\tthis.props.history.push('/')\n\t\t};\n\tthis.getTimeboxTasks(projectId, timeboxId).then(\n\t\tthis.state = {dataReceived: true, \n\t\t\t\t\tprojectId: projectId, \n\t\t\t\t\ttimeboxId: timeboxId,\n\t\t\t\t\ttimeboxName: timeboxName, \n\t\t\t\t\ttasks: []})\n  }\n\n  \tgetTimeboxTasks = async (projectId, timeboxId) => {\n  \t\tconst resp = await axios.get(`/get_tasks_of_timebox?project_id=${projectId}&timebox_id=${timeboxId}`)\n  \t\tthis.setState({tasks: resp.data.tasks})\n  \t}\n\n  \tupdateTask = (taskId, status) => {\n  \t\tconst taskObj = this.state.tasks.find(task => task.id === taskId)\n  \t\ttaskObj.status = status\n  \t\tif (status ==='Done') {\n  \t\t\ttaskObj.priority = 0\n  \t\t}\n  \t\tconst tasks = this.state.tasks.filter(task => task !== taskObj)\n  \t\tconst newTasks = [...tasks, taskObj]\n  \t\tthis.setState({tasks: newTasks})\n  \t}\n\n  \taddNewTask = (taskData) => {\n\t\tthis.setState(prevState => ({\n    \t\ttasks: [...this.state.tasks, taskData]\n    \t}));\n  \t};\n\n  \tMoveToBacklog = (taskId) => {\n  \t\taxios.post('/update_task', {\n  \t\t\tproject_id: this.state.projectId,\n  \t\t\ttask_id: taskId,\n  \t\t\tpriority: 0,\n  \t\t\ttimebox: 'Backlog'\n  \t\t})\n  \t\tconst taskObj = this.state.tasks.find(task => task.id === taskId)\n  \t\tconst tasks = this.state.tasks.filter(task => task !== taskObj)\n  \t\tthis.setState({tasks: tasks})\n\n  \t}\n\n\trender() {\n\t\tif (this.state.dataReceived === false) {\n\t\t\treturn<div>abc</div>\n\t\t}\n\t\telse {\n\t\t\tconst tasks = this.state.tasks.sort((a,b) => a.priority > b.priority ? 1 : -1)\n\t\t\treturn \t<div>\n\t\t\t\t\t\t<div className='row working-page'>\n\t\t\t\t\t\t\t<div className='col-8 mx-auto'>\n\t\t\t\t\t\t\t\t<ReopenTimeBox \n\t\t\t\t\t\t\t\t\tprojectId={this.state.projectId}\n\t\t\t\t\t\t\t\t\ttimeboxId={this.state.timeboxId} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CloseTimebox \n\t\t\t\t\t\t\t\t\tprojectId={this.state.projectId}\n\t\t\t\t\t\t\t\t\ttimeboxId={this.state.timeboxId} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<AddTask\n\t\t\t\t\t\t\t\tprojectId={this.state.projectId}\n\t\t\t\t\t\t\t\ttimeboxName={this.state.timeboxName}\n\t\t\t\t\t\t\t\taddNewTask={this.addNewTask}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Tasks \n\t\t\t\t\t\t\t\ttasks={tasks}\n\t\t\t\t\t\t\t\tupdateTask={this.updateTask}\n\t\t\t\t\t\t\t\tMoveToBacklog={this.MoveToBacklog}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t  \t\t</div>\n\t\t\t}\n\t}\n}\n\nexport default Working"]},"metadata":{},"sourceType":"module"}