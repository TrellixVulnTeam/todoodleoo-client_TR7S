{"ast":null,"code":"import _regeneratorRuntime from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{postRequest,TestPost,TestGet}from'./../API/api.js';import'./login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',password:''};_this.loginFailed=function(){var el=document.getElementById('error');el.innerHTML='Login failed, incorrect username or password';};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();data={username:_this.state.username,password:_this.state.password};_context.prev=2;_context.next=5;return postRequest('/auth/login',data).then(function(resp){//need to wait longer to get the response back before heading over to the index page\n//window.location = '/'\n},function(error){console.log(error);});case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);console.log('error:',_context.t0);case 10:_this.setState({username:'',password:''});case 11:case\"end\":return _context.stop();}}},_callee,null,[[2,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-8 mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"container\",children:\"Log In\"}),/*#__PURE__*/_jsx(TestPost,{}),/*#__PURE__*/_jsx(TestGet,{}),/*#__PURE__*/_jsx(\"div\",{id:\"error\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg m-2\",placeholder:\"Username\",onChange:function onChange(event){return _this2.setState({username:event.target.value});},value:this.state.username})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control form-control-lg m-2\",placeholder:\"Password\",onChange:function onChange(event){return _this2.setState({password:event.target.value});},value:this.state.password})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mx-auto mb-4\",children:\"Log in\"})})]})]})})});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/Users/markgray/projects/Todoodleoo/todoodleoo-client/src/Login/Login.js"],"names":["React","postRequest","TestPost","TestGet","Login","state","username","password","loginFailed","el","document","getElementById","innerHTML","handleSubmit","event","preventDefault","data","then","resp","error","console","log","setState","target","value","Component"],"mappings":"6xBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,QAAtB,CAAgCC,OAAhC,KAA8C,iBAA9C,CACA,MAAO,aAAP,C,2FAEMC,CAAAA,K,mUACJC,K,CAAQ,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,C,OAERC,W,CAAc,UAAM,CACnB,GAAMC,CAAAA,EAAE,CAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAX,CACAF,EAAE,CAACG,SAAH,CAAe,8CAAf,CACA,C,OAEDC,Y,0FAAe,iBAAOC,KAAP,2HACbA,KAAK,CAACC,cAAN,GACMC,IAFO,CAEA,CACXV,QAAQ,CAAE,MAAKD,KAAL,CAAWC,QADV,CAEXC,QAAQ,CAAE,MAAKF,KAAL,CAAWE,QAFV,CAFA,uCAOLN,CAAAA,WAAW,CAAC,aAAD,CAAgBe,IAAhB,CAAX,CACLC,IADK,CACA,SAACC,IAAD,CAAU,CACd;AACA;AACD,CAJK,CAIH,SAACC,KAAD,CAAW,CACZC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CANK,CAPK,uFAeXC,OAAO,CAACC,GAAR,CAAY,QAAZ,cAfW,QAiBX,MAAKC,QAAL,CAAc,CAAChB,QAAQ,CAAG,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAAd,EAjBW,oE,qHAmBf,iBAAS,iBACP,mBAAO,YAAK,SAAS,CAAC,YAAf,uBACD,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,eAAf,wBACE,WAAI,SAAS,CAAC,WAAd,oBADF,cAEE,KAAC,QAAD,IAFF,cAGE,KAAC,OAAD,IAHF,cAIE,YAAK,EAAE,CAAC,OAAR,EAJF,cAKE,cAAM,QAAQ,CAAE,KAAKM,YAArB,wBACE,YAAK,SAAS,CAAC,YAAf,uBACE,cAAO,IAAI,CAAC,MAAZ,CACE,SAAS,CAAC,kCADZ,CAEE,WAAW,CAAC,UAFd,CAGE,QAAQ,CAAE,kBAAAC,KAAK,QAAI,CAAA,MAAI,CAACQ,QAAL,CAAc,CAAEhB,QAAQ,CAAEQ,KAAK,CAACS,MAAN,CAAaC,KAAzB,CAAd,CAAJ,EAHjB,CAIE,KAAK,CAAE,KAAKnB,KAAL,CAAWC,QAJpB,EADF,EADF,cASE,kCACE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,kCAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,CAAE,kBAAAQ,KAAK,QAAI,CAAA,MAAI,CAACQ,QAAL,CAAc,CAAEf,QAAQ,CAAEO,KAAK,CAACS,MAAN,CAAaC,KAAzB,CAAd,CAAJ,EAJjB,CAKE,KAAK,CAAE,KAAKnB,KAAL,CAAWE,QALpB,EADF,EATF,cAkBO,YAAK,SAAS,CAAC,iBAAf,uBACC,eAAQ,SAAS,CAAC,8BAAlB,oBADD,EAlBP,GALF,GADF,EADC,EAAP,CAiCD,C,mBA7DiBP,KAAK,CAACyB,S,EAgE1B,cAAgBrB,CAAAA,KAAhB","sourcesContent":["import React from \"react\";\nimport { postRequest, TestPost, TestGet }from './../API/api.js'\nimport './login.css';\n\nclass Login extends React.Component {\n  state = { username: '', password: ''};\n\n  loginFailed = () => {\n   const el = document.getElementById('error')\n   el.innerHTML = 'Login failed, incorrect username or password'\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault()\n    const data = {\n      username: this.state.username,\n      password: this.state.password\n    }\n    try {\n      await postRequest('/auth/login', data)\n      .then((resp) => {\n        //need to wait longer to get the response back before heading over to the index page\n        //window.location = '/'\n      }, (error) => {\n        console.log(error)\n      })\n    } catch (err) {\n      console.log('error:', err)\n    }\n      this.setState({username : '', password: ''})\n  };\n  render() {\n    return <div className='login-page'>\n          <div className='row'>\n            <div className='col-8 mx-auto'>\n              <h2 className='container'>Log In</h2>\n              <TestPost />\n              <TestGet />\n              <div id='error'></div>\n              <form onSubmit={this.handleSubmit}>\n                <div className='form-group'>\n                  <input type=\"text\"\n                    className='form-control form-control-lg m-2'\n                    placeholder=\"Username\"\n                    onChange={event => this.setState({ username: event.target.value })}\n                    value={this.state.username}\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"password\"\n                    className='form-control form-control-lg m-2'\n                    placeholder=\"Password\"\n                    onChange={event => this.setState({ password: event.target.value })}\n                    value={this.state.password}\n                  />\n                </div>\n                     <div className='col text-center'>\n                      <button className='btn btn-primary mx-auto mb-4'>Log in</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n\n  }\n}\n\nexport default  Login\n"]},"metadata":{},"sourceType":"module"}