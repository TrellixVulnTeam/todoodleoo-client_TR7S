{"ast":null,"code":"var _jsxFileName = \"/Users/markgray/projects/todoodleoo/src/Timeboxes/Timeboxes.js\";\nimport React from 'react';\nimport { Form } from \"react-bootstrap\";\nimport { AddTimebox } from './../Forms/AddItem.js';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport axios from 'axios';\nimport { TimeboxTask } from './../Task/Task.js';\nimport './timeboxes.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Timebox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updateTaskState = (taskId, targetStatus) => {\n      const task = this.state.tasks.find(t => t.id === taskId);\n      const tasks = this.state.tasks.filter(t => t !== task);\n      task.status = targetStatus; //we should splice the task back in its original place here\n\n      console.log('doing this');\n      this.setState({\n        tasks: [...tasks, task]\n      });\n    };\n\n    this.startTask = async taskId => {\n      try {\n        const r = await axios.post('/update_task_status', {\n          task_id: taskId,\n          target_status: 'In Progress'\n        });\n        this.updateTaskState(taskId, 'In Progress');\n      } catch (err) {\n        console.log('Task Update Failed');\n      }\n    };\n\n    this.completeTask = async taskId => {\n      try {\n        const r = await axios.post('/update_task_status', {\n          task_id: taskId,\n          target_status: 'Done'\n        });\n        this.updateTaskState(taskId, 'Done');\n      } catch (err) {\n        console.log('Task Update Failed');\n      }\n    };\n\n    this.reopenTask = async taskId => {\n      try {\n        const r = await axios.post('update_task_status', {\n          task_id: taskId,\n          target_status: 'To Do'\n        });\n        this.updateTaskState(taskId, 'To Do');\n      } catch (err) {\n        console.log('Task Update Failed');\n      }\n    };\n\n    this.state = {\n      tasks: this.props.tasks\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Droppable, {\n      droppableId: 'Timebox:' + this.props.title,\n      children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timebox card\",\n        ref: provided.innerRef,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"card-title text-center\",\n            children: this.props.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timebox-status\",\n            children: [\"Status:\", this.props.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timebox-goals mx-auto\",\n            children: this.props.goals.map(goal => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"timebox-goal\",\n              children: goal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 11\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timebox-tasks\",\n            children: this.state.tasks.map((task, index) => task.timebox === this.props.title && /*#__PURE__*/_jsxDEV(Draggable, {\n              draggableId: String(task.id),\n              index: index,\n              children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: provided.innerRef,\n                ...provided.draggableProps,\n                ...provided.dragHandleProps,\n                children: /*#__PURE__*/_jsxDEV(TimeboxTask, { ...task,\n                  startTask: this.startTask,\n                  completeTask: this.completeTask,\n                  reopenTask: this.reopenTask\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 14\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 15\n              }, this)\n            }, task.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 13\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 8\n        }, this), provided.placeholder]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nclass Timeboxes extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeboxes-container col-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"component-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"component-title\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Timeboxes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(AddTimebox, {\n          projectId: this.props.projectId,\n          updateTimeboxes: this.props.addTimebox\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 8\n        }, this), this.props.timeboxes.map(timebox => timebox.title !== 'Backlog' && /*#__PURE__*/_jsxDEV(Timebox, {\n          projectId: this.props.projectId,\n          tasks: this.props.tasks,\n          ...timebox\n        }, timebox.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Timeboxes;","map":{"version":3,"sources":["/Users/markgray/projects/todoodleoo/src/Timeboxes/Timeboxes.js"],"names":["React","Form","AddTimebox","Droppable","Draggable","axios","TimeboxTask","Timebox","Component","constructor","props","updateTaskState","taskId","targetStatus","task","state","tasks","find","t","id","filter","status","console","log","setState","startTask","r","post","task_id","target_status","err","completeTask","reopenTask","render","title","provided","innerRef","goals","map","goal","index","timebox","String","draggableProps","dragHandleProps","placeholder","Timeboxes","projectId","addTimebox","timeboxes"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Form } from \"react-bootstrap\";\nimport { AddTimebox } from './../Forms/AddItem.js'\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport axios from 'axios';\nimport {TimeboxTask} from './../Task/Task.js';\nimport './timeboxes.css';\n\nclass Timebox extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        tasks: this.props.tasks\n\t    };\n\t  }\n\n\tupdateTaskState = (taskId, targetStatus) => {\n\t\tconst task = this.state.tasks.find(t => t.id === taskId)\n  \t\tconst tasks = this.state.tasks.filter( t => t !== task)\n  \t\ttask.status = targetStatus\n  \t\t//we should splice the task back in its original place here\n  \t\tconsole.log('doing this')\n  \t\tthis.setState({tasks: [...tasks, task] })\n\t}\n\n\tstartTask = async (taskId) => {\n\n\t\ttry {\n      \t\tconst r = await axios.post('/update_task_status', {\n\t\t\t\ttask_id: taskId,\n\t\t\t\ttarget_status: 'In Progress' \n\t\t\t})\n      \t\tthis.updateTaskState(taskId, 'In Progress')\n\n    } catch (err) {\n      console.log('Task Update Failed');\n    }\n  };\n\n  \tcompleteTask = async (taskId) => {\n  \t\ttry {\n  \t\t\tconst r = await axios.post('/update_task_status', {\n  \t\t\t\ttask_id: taskId,\n  \t\t\t\ttarget_status: 'Done'\n  \t\t\t})\n  \t\t\tthis.updateTaskState(taskId, 'Done')\n  \t\t} catch (err) {\n  \t\t\tconsole.log('Task Update Failed')\n  \t\t}\n  \t}\n\n  \treopenTask = async (taskId) => {\n  \t\ttry {\n  \t\t\tconst r = await axios.post('update_task_status', {\n  \t\t\t\ttask_id: taskId,\n  \t\t\t\ttarget_status: 'To Do'\n  \t\t\t})\n  \t\t\tthis.updateTaskState(taskId, 'To Do')\n  \t\t} catch (err) {\n  \t\t\tconsole.log('Task Update Failed')\n  \t\t}\n\n  \t}\n  \t\n\n\trender() {\n\t\treturn  <Droppable droppableId={'Timebox:' + this.props.title}>\n\t\t\t\t\t{(provided) => (\n\t\t\t\t\t\t<div className='timebox card' ref={provided.innerRef}>\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<h2 className='card-title text-center'>{this.props.title}</h2>\n\t\t\t\t\t\t\t\t<div className='timebox-status'>Status:{this.props.status}</div>\n\t\t\t\t\t\t\t\t<div className='timebox-goals mx-auto'>\n\t\t\t\t\t\t\t\t\t{this.props.goals.map( goal =>\n\t\t\t\t\t\t\t\t\t\t<div className='timebox-goal'>\n\t\t\t\t\t\t\t\t\t\t\t{goal}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='timebox-tasks'>\n\t\t\t\t\t\t\t\t\t{this.state.tasks.map( (task, index) =>\n\t\t\t\t\t\t\t\t\t\t\ttask.timebox === this.props.title &&\n\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={task.id} draggableId={String(task.id)} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t      \t\t\t\t\t        {...provided.dragHandleProps}\t\t\n\t\t\t\t\t\t\t\t\t    \t\t\t    >\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TimeboxTask\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...task}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartTask={this.startTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcompleteTask={this.completeTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treopenTask={this.reopenTask}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t}\n}\n\nclass Timeboxes extends React.Component {\n\trender() {\n\t\treturn  <div className='timeboxes-container col-6'>\n\t\t\t\t  <div className='component-container'>\n\t\t\t\t    <div className='component-title'>\n\t\t\t\t  \t\t<span>Timeboxes</span>\n\t\t\t\t  \t</div> \t\n\t\t\t\t  \t<AddTimebox \n\t\t\t\t  \t  projectId={this.props.projectId}\n\t\t\t\t  \t  updateTimeboxes={this.props.addTimebox}\n\t\t\t\t  \t/>\n\t\t\t\t  \t{this.props.timeboxes.map(timebox =>\n\t\t\t\t  \t\ttimebox.title !== 'Backlog' &&\n\t\t\t\t  \t\t<Timebox\n\t\t\t\t\t\t\tkey={timebox.id}\n\t\t\t\t\t\t\tprojectId={this.props.projectId}\n\t\t\t\t\t\t\ttasks={this.props.tasks}\n\t\t\t\t\t\t\t{...timebox}\n\t\t\t\t\t\t />\n\t\t\t\t  \t\t)}\t\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t}\n}\n\nexport default Timeboxes"]},"metadata":{},"sourceType":"module"}