{"ast":null,"code":"import _defineProperty from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markgray/projects/todoodleoo/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link,Redirect}from\"react-router-dom\";import'bootstrap';import axios from'axios';import'./planning.css';import Task from'./../Task/Task.js';import Themes from'./../Themes/Themes.js';import{TimeboxModal,AddTimebox,StartWorking}from'./../Timebox/Timebox.js';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TaskList=/*#__PURE__*/function(_React$Component){_inherits(TaskList,_React$Component);var _super=_createSuper(TaskList);function TaskList(){_classCallCheck(this,TaskList);return _super.apply(this,arguments);}_createClass(TaskList,[{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 mx-auto w-100\",children:[this.props.tasks.map(function(task,index){return/*#__PURE__*/_jsx(Draggable,{draggableId:String(task.id),index:index,children:function children(provided){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{children:/*#__PURE__*/_jsx(Task,_objectSpread({innerRef:provided.innerRef,last:task.priority===_this.props.tasks.length-1?true:false,changePriority:_this.props.changePriority,themes:_this.props.themes,epics:_this.props.epics,allTimeboxes:_this.props.allTimeboxes,convertToEpic:_this.props.convertToEpic,deleteTask:_this.props.deleteTask},task))}));}},task.id);}),this.props.tasks.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"card card-outline\"})]});}}]);return TaskList;}(React.Component);var TasksColumn=/*#__PURE__*/function(_React$Component2){_inherits(TasksColumn,_React$Component2);var _super2=_createSuper(TasksColumn);function TasksColumn(){var _this2;_classCallCheck(this,TasksColumn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.state={tasks:[]};return _this2;}_createClass(TasksColumn,[{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container h3\",children:this.props.colId}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-2\",children:/*#__PURE__*/_jsx(Droppable,{droppableId:this.props.colId,children:function children(provided){return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{children:[_this3.props.colId!=='Backlog'&&_this3.props.tasks.length>0&&/*#__PURE__*/_jsx(StartWorking,{projectId:_this3.props.projectId,timeboxId:_this3.props.timeboxId,timeboxName:_this3.props.colId}),/*#__PURE__*/_jsx(TaskList,_objectSpread(_objectSpread({innerRef:provided.innerRef},provided.droppableProps),{},{tasks:_this3.props.tasks,changePriority:_this3.props.changePriority,themes:_this3.props.themes,epics:_this3.props.epics,allTimeboxes:_this3.props.allTimeboxes,convertToEpic:_this3.props.convertToEpic,deleteTask:_this3.props.deleteTask})),provided.placeholder]}));}})})]});}}]);return TasksColumn;}(React.Component);var TasksContainer=/*#__PURE__*/function(_React$Component3){_inherits(TasksContainer,_React$Component3);var _super3=_createSuper(TasksContainer);function TasksContainer(){var _this4;_classCallCheck(this,TasksContainer);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this4=_super3.call.apply(_super3,[this].concat(args));_this4.state={showAddTimeboxModalStatus:false};_this4.showAddTimeboxModal=function(){_this4.setState({showAddTimeboxModalStatus:true});};_this4.hideTimeboxModal=function(){_this4.setState({showAddTimeboxModalStatus:false});};_this4.addTimebox=function(timeboxData){_this4.props.addTimebox(timeboxData);};return _this4;}_createClass(TasksContainer,[{key:\"render\",value:function render(){var _this5=this;var backlog=this.props.allTimeboxes.find(function(tb){return tb.title==='Backlog';});var timeboxes=this.props.allTimeboxes.filter(function(tb){return tb.title!=='Backlog';});console.log(this.props.tasks);return/*#__PURE__*/_jsxs(\"div\",{className:\"row lists\",children:[/*#__PURE__*/_jsx(TasksColumn,{colId:backlog.title,tasks:this.props.tasks.filter(function(task){return task.timebox===backlog.title;}),changePriority:this.props.changePriority,themes:this.props.themes,all_timeboxes:this.props.all_timeboxes,deleteTask:this.props.deleteTask}),timeboxes.map(function(timebox){return/*#__PURE__*/_jsx(TasksColumn,{colId:timebox.title,timeboxId:timebox.id,projectId:_this5.props.projectId,tasks:_this5.props.tasks.filter(function(task){return task.timebox===timebox.title;}),changePriority:_this5.props.changePriority,themes:_this5.props.themes,all_timeboxes:_this5.props.all_timeboxes,deleteTask:_this5.props.deleteTask},timebox.id);}),/*#__PURE__*/_jsx(TimeboxModal,{projectId:this.props.projectId,display:this.state.showAddTimeboxModalStatus,hide:this.hideTimeboxModal,addTimebox:this.addTimebox}),this.props.allTimeboxes.length===1&&/*#__PURE__*/_jsx(AddTimebox,{showAddTimeboxModal:this.showAddTimeboxModal})]});}}]);return TasksContainer;}(React.Component);var TasksArea=/*#__PURE__*/function(_React$Component4){_inherits(TasksArea,_React$Component4);var _super4=_createSuper(TasksArea);function TasksArea(){_classCallCheck(this,TasksArea);return _super4.apply(this,arguments);}_createClass(TasksArea,[{key:\"render\",value:function render(){var height='';if(document.getElementById(\"themes-container\")){var themes_height=document.getElementById(\"themes-container\").offsetHeight;var nav_height=80;var total=nav_height+themes_height;height=String(total)+'px';}else{height='200px';}var style=\"\".concat(height);return/*#__PURE__*/_jsxs(\"div\",{id:\"non-fixed-content\",style:{top:style},children:[/*#__PURE__*/_jsx(CreateTaskForm,{onSubmit:this.props.onSubmit,projectId:this.props.projectId}),/*#__PURE__*/_jsx(TasksContainer,{tasks:this.props.tasks,themes:this.props.themes,allTimeboxes:this.props.allTimeboxes,deleteTask:this.props.deleteTask,projectId:this.props.projectId,addTimebox:this.props.addTimebox})]});}}]);return TasksArea;}(React.Component);var CreateTaskForm=/*#__PURE__*/function(_React$Component5){_inherits(CreateTaskForm,_React$Component5);var _super5=_createSuper(CreateTaskForm);function CreateTaskForm(){var _this6;_classCallCheck(this,CreateTaskForm);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this6=_super5.call.apply(_super5,[this].concat(args));_this6.state={title:''};_this6.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.post('/add_task',{title:_this6.state.title,project_id:_this6.props.projectId}).then(function(response){_this6.props.onSubmit(response.data);},function(error){console.log(error);});event.preventDefault();_this6.setState({title:''});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this6;}_createClass(CreateTaskForm,[{key:\"render\",value:function render(){var _this7=this;return/*#__PURE__*/_jsx(\"div\",{className:\"row add-task\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-6 mx-auto mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control form-control-lg m-2\",type:\"text\",value:this.state.title,onChange:function onChange(event){return _this7.setState({title:event.target.value});},placeholder:\"What do you need to get done?\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mx-auto mb-4\",children:\"Add Task\"})})]})})});}}]);return CreateTaskForm;}(React.Component);var Planning=/*#__PURE__*/function(_React$Component6){_inherits(Planning,_React$Component6);var _super6=_createSuper(Planning);function Planning(){var _this8;_classCallCheck(this,Planning);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}_this8=_super6.call.apply(_super6,[this].concat(args));_this8.state={dataReceived:false};_this8.addNewTask=function(taskData){_this8.setState(function(prevState){return{tasks:[].concat(_toConsumableArray(_this8.state.tasks),[taskData])};});};_this8.addTimebox=function(timebox){_this8.setState(function(prevState){return{timeboxes:[].concat(_toConsumableArray(_this8.state.timeboxes),[timebox])};});};_this8.addTheme=function(themeData){_this8.setState(function(prevState){return{themes:[].concat(_toConsumableArray(_this8.state.themes),[themeData])};});};_this8.deleteTask=function(taskId){axios.post('/delete_task',{task_id:taskId,project_id:_this8.state.projectId}).then(function(response){_this8.setState(function(prevState){return{tasks:response.data.tasks};});});};_this8.filterByTheme=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(theme){var filteredTasks;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(theme==='')){_context2.next=4;break;}_this8.getTasks(_this8.state.projectId);_context2.next=8;break;case 4:_context2.next=6;return _this8.getTasks(_this8.state.projectId);case 6:filteredTasks=_this8.state.tasks.filter(function(task){return task.theme===theme;});_this8.setState({tasks:filteredTasks});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this8.getTasks=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(projectId){var resp,timeboxes,themes;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"/get_tasks?project_id=\".concat(projectId));case 2:resp=_context3.sent;timeboxes=resp.data['timeboxes'];themes=resp.data['themes'];_this8.setState({tasks:resp.data['tasks'],themes:themes,timeboxes:timeboxes});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this8.checkForInProgressTimeboxes=function(timeboxes){timeboxes.forEach(function(timebox){if(timebox.status==='In Progress'){_this8.setState({timeboxRedirect:timebox.id,ipTimeboxName:timebox.title});}_this8.setState({dataReceived:true});});};_this8.onDragUpdate=function(result){//make theme bigger and highlighted so you know what you are dragging it into\n};_this8.onDragEnd=function(result){var destination=result.destination,source=result.source,draggableId=result.draggableId;if(!destination){return;}if(destination.droppableId===source.droppableId&&destination.index===source.index){return;}var taskId=Number(draggableId);var obj=_this8.state.tasks.find(function(o){return o.id===taskId;});if(destination.droppableId.slice(0,5)==='Theme'){var themeId=Number(destination.droppableId.slice(6,11));axios.post('/update_task_theme',{project_id:_this8.state.projectId,task_id:taskId,theme_id:themeId});var themeObj=_this8.state.themes.find(function(o){return o.id===themeId;});obj.theme=themeObj.title;obj.theme_color=themeObj.color;}else{obj.timebox=destination.droppableId;axios.post('/update_task',{project_id:_this8.state.projectId,task_id:taskId,priority:result.destination.index,timebox:obj.timebox});var listItems=_this8.state.tasks.filter(function(t){return t.timebox===destination.droppableId;});var filteredListItems=listItems.filter(function(x){return x!==undefined;});var nonListItems=_this8.state.tasks.filter(function(t){return t.timebox!==destination.droppableId;});var _filteredListItems$sp=filteredListItems.splice(result.source.index,1),_filteredListItems$sp2=_slicedToArray(_filteredListItems$sp,1),reorderedItem=_filteredListItems$sp2[0];filteredListItems.splice(result.destination.index,0,reorderedItem);_this8.setState({tasks:[].concat(_toConsumableArray(filteredListItems),_toConsumableArray(nonListItems))});}};return _this8;}_createClass(Planning,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var sp,projectId;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:sp=new URLSearchParams(this.props.location.query);projectId=Number(sp.get(\"projectId\"));if(!(projectId===null||projectId===0)){_context4.next=6;break;}this.props.history.push('/');_context4.next=10;break;case 6:this.setState({projectId:projectId});_context4.next=9;return this.getTasks(projectId);case 9:this.checkForInProgressTimeboxes(this.state.timeboxes);case 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _jsx2;return this.state.timeboxRedirect?/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/working\",query:{projectId:this.state.projectId,timeboxId:this.state.timeboxRedirect,timeboxName:this.state.ipTimeboxName}}}):this.state.dataReceived===true?/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:this.onDragEnd,onDragUpdate:this.onDragUpdate,children:/*#__PURE__*/_jsxs(\"div\",{className:\"planning-page\",children:[/*#__PURE__*/_jsx(Themes,{themes:this.state.themes,filterByTheme:this.filterByTheme,projectId:this.state.projectId,addTheme:this.addTheme}),/*#__PURE__*/_jsx(TasksArea,(_jsx2={projectId:this.state.projectId,onSubmit:this.addNewTask,tasks:this.state.tasks,themes:this.state.themes,allTimeboxes:this.state.timeboxes,deleteTask:this.deleteTask},_defineProperty(_jsx2,\"projectId\",this.state.projectId),_defineProperty(_jsx2,\"addTimebox\",this.addTimebox),_jsx2))]})}):/*#__PURE__*/_jsx(\"div\",{});}}]);return Planning;}(React.Component);export default Planning;","map":{"version":3,"sources":["/Users/markgray/projects/todoodleoo/src/Planning/Planning.js"],"names":["React","Link","Redirect","axios","Task","Themes","TimeboxModal","AddTimebox","StartWorking","DragDropContext","Droppable","Draggable","TaskList","props","tasks","map","task","index","String","id","provided","innerRef","draggableProps","dragHandleProps","priority","length","changePriority","themes","epics","allTimeboxes","convertToEpic","deleteTask","Component","TasksColumn","state","colId","projectId","timeboxId","droppableProps","placeholder","TasksContainer","showAddTimeboxModalStatus","showAddTimeboxModal","setState","hideTimeboxModal","addTimebox","timeboxData","backlog","find","tb","title","timeboxes","filter","console","log","timebox","all_timeboxes","TasksArea","height","document","getElementById","themes_height","offsetHeight","nav_height","total","style","top","onSubmit","CreateTaskForm","handleSubmit","event","post","project_id","then","response","data","error","preventDefault","target","value","Planning","dataReceived","addNewTask","taskData","prevState","addTheme","themeData","taskId","task_id","filterByTheme","theme","getTasks","filteredTasks","get","resp","checkForInProgressTimeboxes","forEach","status","timeboxRedirect","ipTimeboxName","onDragUpdate","result","onDragEnd","destination","source","draggableId","droppableId","Number","obj","o","slice","themeId","theme_id","themeObj","theme_color","color","listItems","t","filteredListItems","x","undefined","nonListItems","splice","reorderedItem","sp","URLSearchParams","location","query","history","push","pathname","timeboxName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link, Redirect } from \"react-router-dom\";\nimport 'bootstrap';\nimport axios from 'axios';\nimport './planning.css';\nimport Task from './../Task/Task.js';\nimport Themes from './../Themes/Themes.js'\nimport { TimeboxModal, AddTimebox, StartWorking } from './../Timebox/Timebox.js';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\n\nclass TaskList extends React.Component {\n\trender() {\t\t\n\t\treturn <div className='col-6 mx-auto w-100'>\n\t\t\t\t\t\t\t{this.props.tasks.map((task, index) =>\n\n\t\t\t\t\t\t\t\t<Draggable key={task.id} draggableId={String(task.id)} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\n\t\t\t\t\t\t\t\t\t\t<div  \n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t      \t\t\t\t\t{...provided.dragHandleProps}\t\t\n\t\t\t\t\t    \t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Task \n\t\t\t\t\t\t\t\t\t\t\t\tinnerRef={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\tlast={task.priority === this.props.tasks.length -1 ? true : false}\n\t\t\t\t\t\t\t\t\t\t\t\tchangePriority={this.props.changePriority}\n\t\t\t\t\t\t\t\t\t\t\t\tthemes={this.props.themes}\n\t\t\t\t\t\t\t\t\t\t\t\tepics={this.props.epics}\n\t\t\t\t\t\t\t\t\t\t\t\tallTimeboxes={this.props.allTimeboxes}\n\t\t\t\t\t\t\t\t\t\t\t\tconvertToEpic={this.props.convertToEpic}\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteTask={this.props.deleteTask}\n\t\t\t\t\t\t\t\t\t\t\t\t{...task}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{this.props.tasks.length === 0  &&\n\t\t\t\t\t\t\t\t<div className='card card-outline'>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t </div>\n\t\t\t\t}\n\t\t\t}\n\nclass TasksColumn extends React.Component {\n\tstate = {tasks: []}\n\n\trender() {\n\t\treturn <div className='col-4'>\n\t\t\t\t\t\t\t<div className='container h3'>\n\t\t\t\t\t\t\t\t{this.props.colId}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='row mt-2'>\n\t\t\t\t\t\t\t\t<Droppable droppableId={this.props.colId}>\n\t\t\t\t\t\t\t\t\t{(provided) => (\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t      ref={provided.innerRef}\n\t\t\t\t\t\t\t\t      {...provided.draggableProps}\n\t\t\t\t\t\t\t\t      {...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t    \t>\n\n\t\t\t\t\t\t\t\t    \t{this.props.colId !== 'Backlog' && this.props.tasks.length > 0 &&\n\t\t\t\t\t\t\t\t\t        <StartWorking \n\t\t\t\t\t\t\t\t\t        \tprojectId={this.props.projectId}\n\t\t\t\t\t\t\t\t\t        \ttimeboxId={this.props.timeboxId}\n\t\t\t\t\t\t\t\t\t        \ttimeboxName={this.props.colId}\n\t\t\t\t\t\t\t\t\t        />\n\t\t\t\t\t\t\t\t\t      }\n\t\t\t\t\t\t\t\t\t\t\t<TaskList\n\t\t\t\t\t\t\t\t\t\t\tinnerRef={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\t\t\t\t\ttasks={this.props.tasks}\n\t\t\t\t\t\t\t\t\t\t\tchangePriority={this.props.changePriority} \n\t\t\t\t\t\t\t\t\t\t\tthemes={this.props.themes} \n\t\t\t\t\t\t\t\t\t\t\tepics={this.props.epics}\n\t\t\t\t\t\t\t\t\t\t\tallTimeboxes={this.props.allTimeboxes}\n\t\t\t\t\t\t\t\t\t\t\tconvertToEpic={this.props.convertToEpic}\n\t\t\t\t\t\t\t\t\t\t\tdeleteTask={this.props.deleteTask}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Droppable>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t}\n\nclass TasksContainer extends React.Component {\n\tstate = {showAddTimeboxModalStatus: false}\n\n\tshowAddTimeboxModal = () => {\n\t\tthis.setState({showAddTimeboxModalStatus: true})\n\t}\n\n\thideTimeboxModal = () => {\n\t\tthis.setState({showAddTimeboxModalStatus: false})\n\t}\n\n\taddTimebox = (timeboxData) => {\n\t\tthis.props.addTimebox(timeboxData)\n\t}\n\n\trender() {\n\t\tconst backlog = this.props.allTimeboxes.find(tb => tb.title === 'Backlog')\n\t\tconst timeboxes = this.props.allTimeboxes.filter(tb => tb.title !== 'Backlog')\n\t\tconsole.log(this.props.tasks)\n\t\treturn  <div className='row lists'>\n\t\t\t\t\t<TasksColumn \n\t\t\t\t\t\tcolId={backlog.title}\n\t\t\t\t\t\ttasks={this.props.tasks.filter(task => task.timebox === backlog.title)}\n\t\t\t\t\t\tchangePriority={this.props.changePriority} \n\t\t\t\t\t\tthemes={this.props.themes} \n\t\t\t\t\t\tall_timeboxes={this.props.all_timeboxes}\n\t\t\t\t\t\tdeleteTask={this.props.deleteTask}\n\t\t\t\t\t/>\n\t\t\t\t{timeboxes.map(timebox => \n\t\t\t\t\t<TasksColumn\n\t\t\t\t\t\tkey={timebox.id} \n\t\t\t\t\t\tcolId={timebox.title}\n\t\t\t\t\t\ttimeboxId={timebox.id}\n\t\t\t\t\t\tprojectId={this.props.projectId}\n\t\t\t\t\t\ttasks={this.props.tasks.filter(task => task.timebox === timebox.title)}\n\t\t\t\t\t\tchangePriority={this.props.changePriority} \n\t\t\t\t\t\tthemes={this.props.themes} \n\t\t\t\t\t\tall_timeboxes={this.props.all_timeboxes}\n\t\t\t\t\t\tdeleteTask={this.props.deleteTask}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<TimeboxModal\n\t\t\t\t  projectId={this.props.projectId}\n\t\t\t\t\tdisplay={this.state.showAddTimeboxModalStatus}\n\t\t\t\t\thide={this.hideTimeboxModal}\n\t\t\t\t\taddTimebox={this.addTimebox}\n\t\t\t\t/>\n\t\t\t\t{this.props.allTimeboxes.length === 1 &&\n\t\t\t        <AddTimebox \n\t\t\t        \tshowAddTimeboxModal={this.showAddTimeboxModal}\n\t\t        \t/>\n\t\t\t      }\n\t\t\t  </div>\n\n\t}\n}\n\nclass TasksArea extends React.Component {\n\trender() {\n\t\tlet height = ''\n\t\tif (document.getElementById(\"themes-container\")) {\n\t\t\tlet themes_height = document.getElementById(\"themes-container\").offsetHeight\n\t\t\tlet nav_height = 80\n\t\t\tlet total = nav_height + themes_height\n\t\t\theight = String(total) + 'px'\n\t\t} else { \n\t\t\theight = '200px'\n\t\t}\n\t\tconst style = `${height}`\n\t\treturn <div id='non-fixed-content' style={{top: style}}>\n\t\t\t\t\t\t<CreateTaskForm onSubmit={this.props.onSubmit} projectId={this.props.projectId}/>\n\t\t\t\t\t\t<TasksContainer\n\t\t\t\t\t\t \ttasks={this.props.tasks} \n\t\t\t\t\t\t\tthemes={this.props.themes} \n\t\t\t\t\t\t\tallTimeboxes={this.props.allTimeboxes}\n\t\t\t\t\t\t\tdeleteTask={this.props.deleteTask}\n\t\t\t\t\t\t\tprojectId={this.props.projectId}\n\t\t\t\t\t\t\taddTimebox={this.props.addTimebox}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t}\n}\t\t\t\t\t\t\n\nclass CreateTaskForm extends React.Component {\n\tstate = { title: ''};\n\n\thandleSubmit = async (event) => {\n    axios.post('/add_task', {\n    \ttitle: this.state.title,\n    \tproject_id: this.props.projectId\n    })\n    .then((response) => {\n\t\t  this.props.onSubmit(response.data)\n\t\t}, (error) => {\n\t\t  console.log(error);\n\t\t});\n\t\t  event.preventDefault()\n    \tthis.setState({title : ''})   \n  };\n\n\trender () {\n\t\treturn <div className='row add-task'>\n\t\t\t\t\t\t<div className='col-6 mx-auto mt-3'>\n\t\t\t\t\t\t <form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t \t<div className='form-group'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg m-2'\n\t\t\t\t          type=\"text\" \n\t\t\t\t          value={this.state.title}\n\t\t\t\t          onChange={event => this.setState({ title: event.target.value })}\n\t\t\t\t          placeholder=\"What do you need to get done?\" \n\t\t\t\t          required \n\t\t\t\t        />\n\t\t\t\t       </div>\n\t\t\t         <div className='col text-center'>\n\t\t\t\t\t\t\t\t<button className='btn btn-primary mx-auto mb-4'>Add Task</button>\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t </form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t </div>\n\t}\n}\n\nclass Planning extends React.Component {\n\tstate = {dataReceived:false}\n\n\taddNewTask = (taskData) => {\n\t\tthis.setState(prevState => ({\n    \t\ttasks: [...this.state.tasks, taskData]\n    \t}));\n  \t};\n\n  \taddTimebox = (timebox) => {\n  \t\tthis.setState(prevState => ({\n    \t\ttimeboxes: [...this.state.timeboxes, timebox]\n    \t}));\n  \t}\n\n  \taddTheme = (themeData) => {\n  \t\tthis.setState(prevState => ({\n    \t\tthemes: [...this.state.themes, themeData],\n    \t\t}));\n  \t}\n\n  \tdeleteTask = (taskId) => {\n  \t\taxios.post('/delete_task', {\n  \t\t\ttask_id: taskId,\n  \t\t\tproject_id: this.state.projectId\n  \t\t}).then(\n  \t\t(response) => {\n  \t\t\tthis.setState(prevState => ({\n\t\t    \ttasks: response.data.tasks,\n\t\t    }));\n  \t\t})\n  \t}\n\n  \tfilterByTheme = async (theme) => {\n  \t\t\tif (theme === '') {\n  \t\t\t\tthis.getTasks(this.state.projectId)\n  \t\t\t} else {\n  \t\t\tawait this.getTasks(this.state.projectId)\n\t  \t\tconst filteredTasks = this.state.tasks.filter(task => task.theme === theme);\n\t  \t\tthis.setState({tasks: filteredTasks});\n\t  \t\t}\t\t\n  \t}\n\n  \tgetTasks = async (projectId) => {\n    const resp = await axios.get(`/get_tasks?project_id=${projectId}`)\n    const timeboxes = resp.data['timeboxes']\n    const themes = resp.data['themes']\n    this.setState({ tasks: resp.data['tasks'], \n    \t\t\t\t\t\t\t\tthemes:themes, \n    \t\t\t\t\t\t\t\ttimeboxes: timeboxes \n    \t\t\t\t\t\t\t});\n  };\n\n  \tcheckForInProgressTimeboxes = (timeboxes) => {\n  \t\ttimeboxes.forEach(timebox => {\n    \tif (timebox.status === 'In Progress') {\n    \t\tthis.setState({timeboxRedirect: timebox.id, ipTimeboxName: timebox.title})\n    \t}\n    \tthis.setState({dataReceived: true})\n    })\n\n  \t}\n\n   \tasync componentDidMount() {\n   \t\tconst sp = new URLSearchParams(this.props.location.query);\n\t\tconst projectId = Number(sp.get(\"projectId\"))\n\t\tif (projectId === null || projectId === 0) {\n\t\t\tthis.props.history.push('/')\n\t\t} else {\n\t\t\tthis.setState({projectId: projectId})\n\t\t\tawait this.getTasks(projectId);\n\t\t\tthis.checkForInProgressTimeboxes(this.state.timeboxes)\n\t\t}\n    \t\n    }\n\n    onDragUpdate = (result) => {\n    \t//make theme bigger and highlighted so you know what you are dragging it into\n    }\n\n    onDragEnd = (result) => {\n  \t\tconst {destination, source, draggableId} = result;\n\n  \t\tif (!destination) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (\n  \t\t\tdestination.droppableId === source.droppableId &&\n  \t\t\tdestination.index === source.index\n  \t\t\t) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tconst taskId = Number(draggableId)\n  \t\tconst obj = this.state.tasks.find(o => o.id === taskId);\n\n  \t\tif (destination.droppableId.slice(0,5) === 'Theme') {\n  \t\t\tconst themeId = Number(destination.droppableId.slice(6,11))\n  \t\t\taxios.post('/update_task_theme', {\n  \t\t\tproject_id: this.state.projectId,\n  \t\t\ttask_id: taskId,\n  \t\t\ttheme_id: themeId\n  \t\t\t})\n\n\t  \t\tconst themeObj = this.state.themes.find(o => o.id === themeId)\n\n\t  \t\tobj.theme = themeObj.title\n\t  \t\tobj.theme_color = themeObj.color\n\n  \t\t} else {\n  \t\t\n\t  \t\tobj.timebox = destination.droppableId\n\t  \t\t\n\t  \t\t  axios.post('/update_task', {\n\t  \t\t\tproject_id: this.state.projectId,\n\t  \t\t\ttask_id: taskId,\n\t  \t\t\tpriority: result.destination.index,\n\t  \t\t\ttimebox: obj.timebox\n\t  \t\t})\n\t  \tconst listItems = this.state.tasks.filter(t => t.timebox === destination.droppableId);\n\t  \tconst filteredListItems = listItems.filter(x => x !== undefined);\n\t  \tconst nonListItems = this.state.tasks.filter(t => t.timebox !== destination.droppableId);\n\t\tconst [reorderedItem] = filteredListItems.splice(result.source.index, 1);\n\t\tfilteredListItems.splice(result.destination.index, 0, reorderedItem);\n\t\tthis.setState({\n    \ttasks: [...filteredListItems, ...nonListItems]\n    \t})\n\n\t  \t}\n\n  \t\t\t\t\n  \t}\n\n\trender() {\n\t\treturn   this.state.timeboxRedirect ? (<Redirect\n\t\t\t\t\t\t\t\t\t\t\t\t  to={{\n\t\t\t\t\t\t\t\t\t\t\t\t    pathname: \"/working\",\n\t\t\t\t\t\t\t\t\t\t\t\t    query: {\n\t\t\t\t\t\t\t\t\t\t\t\t    \tprojectId: this.state.projectId, \n\t\t\t\t\t\t\t\t\t\t\t\t    \ttimeboxId: this.state.timeboxRedirect,\n\t\t\t\t\t\t\t\t\t\t\t\t    \ttimeboxName: this.state.ipTimeboxName\n\t\t\t\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t\t\t\t\t\t/>) : \n\t\t\t\t\t\tthis.state.dataReceived === true ? (\n\t\t\t\t\t\t<DragDropContext\n\t\t\t\t\t\t\tonDragEnd = {this.onDragEnd}\n\t\t\t\t\t\t\tonDragUpdate={this.onDragUpdate}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className='planning-page'>\n\t\t\t\t\t\t\t\t<Themes \n\t\t\t\t\t\t\t\t\tthemes={this.state.themes} \n\t\t\t\t\t\t\t\t\tfilterByTheme={this.filterByTheme} \n\t\t\t\t\t\t\t\t\tprojectId={this.state.projectId}\n\t\t\t\t\t\t\t\t\taddTheme={this.addTheme}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TasksArea \n\t\t\t\t\t\t\t\t  projectId={this.state.projectId}\n\t\t\t\t\t\t\t\t  onSubmit={this.addNewTask}\n\t\t\t\t\t\t\t\t  tasks={this.state.tasks} \n\t\t\t\t\t\t\t\t\tthemes={this.state.themes} \n\t\t\t\t\t\t\t\t\tallTimeboxes={this.state.timeboxes}\n\t\t\t\t\t\t\t\t\tdeleteTask={this.deleteTask}\n\t\t\t\t\t\t\t\t\tprojectId={this.state.projectId}\n\t\t\t\t\t\t\t\t\taddTimebox={this.addTimebox}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t</DragDropContext> \n\t\t\t\t\t\t)\n\t\t\t\t\t: <div></div>\n\t}\n}\n\n\nexport default Planning;\n"]},"metadata":{},"sourceType":"module"}