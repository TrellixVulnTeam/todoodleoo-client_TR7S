{"ast":null,"code":"import _regeneratorRuntime from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markgray/projects/Todoodleoo/todoodleoo-client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{getRequest,postRequest,prefix,TestPost}from'./../API/api.js';import'./header.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=/*#__PURE__*/function(_React$Component){_inherits(Header,_React$Component);var _super=_createSuper(Header);function Header(props){var _this;_classCallCheck(this,Header);_this=_super.call(this,props);_this.logout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return postRequest('/auth/logout').then(function(response){window.location.href='/login';},function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));_this.getUserData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getRequest('/auth/me').then(function(response){if(response.data.user_id!==-1){//user is not logged out\n_this.setState({isLoggedIn:true});_this.setState({dataReceived:true});_this.setState({username:response.data.username});console.log('logged in user =',response.data.username);}else{console.log('logged out user');}});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));_this.state={isLoggedIn:false,username:false};return _this;}_createClass(Header,[{key:\"componentDidMount\",value:function componentDidMount(){this.getUserData();}},{key:\"render\",value:function render(){var isLoggedIn=this.state.isLoggedIn;var buttons;if(isLoggedIn){buttons=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"username\",children:this.state.username}),/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-light\",onClick:this.logout,children:\"Logout\"})]});}else{buttons=/*#__PURE__*/_jsxs(\"div\",{className:\"auth-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-primary\",onClick:function onClick(){return window.location.href='/login';},children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-primary\",onClick:function onClick(){return window.location.href='/register';},children:\"Sign Up\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"header text-center\",children:[/*#__PURE__*/_jsx(TestPost,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",onClick:function onClick(){return window.location.href='/';},children:[\"Todoodleoo \",process.env.NODE_ENV,\" \",prefix]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:buttons})]})]});}}]);return Header;}(React.Component);export default Header;","map":{"version":3,"sources":["/Users/markgray/projects/Todoodleoo/todoodleoo-client/src/Header/Header.js"],"names":["React","getRequest","postRequest","prefix","TestPost","Header","props","logout","then","response","window","location","href","err","console","log","getUserData","data","user_id","setState","isLoggedIn","dataReceived","username","state","buttons","process","env","NODE_ENV","Component"],"mappings":"6xBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,MAAlC,CAA0CC,QAA1C,KAAyD,iBAAzD,CAEA,MAAO,cAAP,C,2FAGMC,CAAAA,M,4GACL,gBAAYC,KAAZ,CAAmB,wCAChB,uBAAMA,KAAN,EADgB,MAKhBC,MALgB,sEAKP,yJACFL,CAAAA,WAAW,CAAC,cAAD,CAAX,CACLM,IADK,CACC,SAACC,QAAD,CAAc,CACpBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,QAAvB,CACA,CAHK,CAGH,SAACC,GAAD,CAAS,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,CALK,CADE,uDALO,SAchBG,WAdgB,sEAcF,gLAERf,CAAAA,UAAU,CAAC,UAAD,CAAV,CACFO,IADE,CACG,SAACC,QAAD,CAAc,CACtB,GAAIA,QAAQ,CAACQ,IAAT,CAAcC,OAAd,GAA0B,CAAC,CAA/B,CAAkC,CAAG;AACpC,MAAKC,QAAL,CAAc,CAACC,UAAU,CAAE,IAAb,CAAd,EACG,MAAKD,QAAL,CAAc,CAACE,YAAY,CAAE,IAAf,CAAd,EACA,MAAKF,QAAL,CAAc,CAACG,QAAQ,CAAEb,QAAQ,CAACQ,IAAT,CAAcK,QAAzB,CAAd,EACHR,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCN,QAAQ,CAACQ,IAAT,CAAcK,QAA9C,EACA,CALD,IAKO,CACNR,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACA,CAED,CAXK,CAFQ,0FAedD,OAAO,CAACC,GAAR,eAfc,qEAdE,GAEhB,MAAKQ,KAAL,CAAa,CAACH,UAAU,CAAE,KAAb,CAAoBE,QAAQ,CAAE,KAA9B,CAAb,CAFgB,aAGf,C,oDA8BD,4BAAoB,CAClB,KAAKN,WAAL,GACD,C,sBAEJ,iBAAS,CACR,GAAMI,CAAAA,UAAU,CAAG,KAAKG,KAAL,CAAWH,UAA9B,CACC,GAAII,CAAAA,OAAJ,CAEC,GAAIJ,UAAJ,CAAgB,CACdI,OAAO,cAAG,oCACJ,YAAK,SAAS,CAAC,UAAf,UAA2B,KAAKD,KAAL,CAAWD,QAAtC,EADI,cAEJ,YAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAE,KAAKf,MAA7C,oBAFI,GAAV,CAID,CALD,IAKO,CACLiB,OAAO,cAAG,aAAK,SAAS,CAAC,cAAf,wBACJ,YAAK,SAAS,CAAC,iBAAf,CAAiC,OAAO,CAAE,yBAAMd,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,QAA7B,EAA1C,mBADI,cAEN,YAAK,SAAS,CAAC,iBAAf,CAAiC,OAAO,CAAE,yBAAMF,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,WAA7B,EAA1C,qBAFM,GAAV,CAID,CAEH,mBAAO,aAAK,SAAS,CAAC,oBAAf,wBACH,KAAC,QAAD,IADG,cAEF,aAAK,SAAS,CAAC,KAAf,wBACC,YAAK,SAAS,CAAC,OAAf,uBACC,aAAK,SAAS,CAAC,MAAf,CAAsB,OAAO,CAAE,yBAAMF,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAA7B,EAA/B,yBAA6Ea,OAAO,CAACC,GAAR,CAAYC,QAAzF,KAAoGxB,MAApG,GADD,EADD,cAIC,YAAK,SAAS,CAAC,OAAf,EAJD,cAMC,YAAK,SAAS,CAAC,OAAf,UACEqB,OADF,EAND,GAFE,GAAP,CAaE,C,oBAnEiBxB,KAAK,CAAC4B,S,EAsE3B,cAAevB,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport { getRequest, postRequest, prefix, TestPost }from './../API/api.js'\n\nimport './header.css';\n\n\nclass Header extends React.Component {\n\tconstructor(props) {\n    super(props);\n    this.state = {isLoggedIn: false, username: false};\n    }\n\n    logout = async () => {\n    \tawait postRequest('/auth/logout')\n    \t.then( (response) => {\n    \t\twindow.location.href = '/login'\n    \t}, (err) => {\n    \t\tconsole.log(err)\n    \t});\n    }\n\n    getUserData = async () => {\n\t\t\ttry {\n\t\t\t\tawait getRequest('/auth/me')\n\t      .then((response) => {\n\t\t\t\t\tif (response.data.user_id !== -1) {  //user is not logged out\n\t\t\t\t\t\tthis.setState({isLoggedIn: true});\n\t\t\t      this.setState({dataReceived: true});\n\t\t\t      this.setState({username: response.data.username});\n\t\t\t\t\t\tconsole.log('logged in user =', response.data.username)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('logged out user')\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err)\n\t\t\t}\n    };\n\n    componentDidMount() {\n      this.getUserData();\n    }\n\n\trender() {\n\t\tconst isLoggedIn = this.state.isLoggedIn;\n\t  let buttons;\n\n    if (isLoggedIn) {\n      buttons = <div>\n      \t\t\t\t\t\t<div className='username'>{this.state.username}</div>\n      \t\t\t\t\t\t<div className='btn btn-light' onClick={this.logout}>Logout</div>\n      \t\t\t\t\t</div>;\n    } else {\n      buttons = <div className='auth-buttons'>\n\t\t      \t\t\t\t<div className='btn btn-primary' onClick={() => window.location.href = '/login'}>Login</div>\n\t\t\t\t\t \t\t\t\t<div className='btn btn-primary' onClick={() => window.location.href = '/register'}>Sign Up</div>\n\t\t      \t\t\t</div>\n    }\n\n\t\treturn <div className='header text-center'>\n\t\t\t\t\t\t<TestPost />\n\t\t\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t\t\t<div className='col-3'>\n\t\t\t\t\t\t\t\t\t<div className='logo' onClick={() => window.location.href = '/'}>Todoodleoo {process.env.NODE_ENV} {prefix}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='col-6'>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='col-3'>\n\t\t\t\t\t\t\t\t\t{buttons}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t}\n}\n\nexport default Header\n"]},"metadata":{},"sourceType":"module"}